<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api/Controllers/BlogPostsController.cs" timestamp="1571016325013" />
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Domains/Images/ImageSize.cs" timestamp="1571010311160" />
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/ImageUrlHelper.cs" timestamp="1571007661890" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Helpers/CDNHelper.cs" timestamp="1571019373488">
        <mark key="[" line="8" column="8" />
        <mark key="]" line="8" column="8" />
        <mark key="." line="8" column="8" />
        <mark key="^" line="20" column="28" />
      </file>
      <file name="C:/dev/git/selz/API/src/Selz.Model/Helpers/CDNHelper.cs" timestamp="1571013455435" />
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Extensions/ShopImageExtensions.cs" timestamp="1571007818385" />
      <file name="/CDNHelper.cs" timestamp="1571008923598" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Extensions/UriExtensions.cs" timestamp="1571008596629">
        <mark key="[" line="37" column="12" />
        <mark key="]" line="37" column="12" />
        <mark key="." line="37" column="12" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api/Mapping/BlogPosts/BlogPostProfile.cs" timestamp="1571012442630">
        <mark key="'" line="23" column="130" />
        <mark key="[" line="44" column="0" />
        <mark key="]" line="44" column="70" />
        <mark key="." line="44" column="37" />
        <mark key="^" line="44" column="37" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/BlogPosts/BlogPostScenarios.cs" timestamp="1571021094743">
        <mark key="[" line="493" column="0" />
        <mark key="]" line="493" column="0" />
        <mark key="." line="493" column="0" />
      </file>
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Extensions/DatetimeExtensions.cs" timestamp="1570783023062">
        <mark key="[" line="125" column="0" />
      </file>
      <file name="/Dummy.txt" timestamp="1571020994806">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="/ImageResponse.cs" timestamp="1571012152029" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/Base/FakeBlogPosts.cs" timestamp="1571020635601">
        <mark key="'" line="55" column="54" />
        <mark key="[" line="20" column="40" />
        <mark key="]" line="20" column="48" />
        <mark key="." line="20" column="45" />
        <mark key="^" line="20" column="45" />
      </file>
      <file name="C:/dev/git/selz/Services.Catalog/Service/src/Api/Selz.Catalog.Api.UnitTests/Selz.Catalog.Api.UnitTests.csproj" timestamp="1571021152828" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.Models/Images/ImageResponse.cs" timestamp="1571015541389">
        <mark key="[" line="22" column="26" />
        <mark key="]" line="22" column="26" />
        <mark key="." line="22" column="26" />
        <mark key="^" line="14" column="39" />
      </file>
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Extensions/UriExtensions.cs" timestamp="1571008380834">
        <mark key="[" line="221" column="0" />
        <mark key="]" line="234" column="9" />
        <mark key="^" line="113" column="36" />
        <mark key="." line="113" column="36" />
      </file>
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/CDNHelper.cs" timestamp="1571009230284">
        <mark key="[" line="5" column="0" />
        <mark key="]" line="5" column="48" />
      </file>
      <file name="C:/dev/git/selz/drachma/core/Selz.Core.Domains.Shops/Images/ShopImage.cs" timestamp="1571011971098" />
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Constants.cs" timestamp="1571017113805">
        <mark key="[" line="545" column="0" />
        <mark key="]" line="545" column="79" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Helpers/ImageUrlHelper.cs" timestamp="1571017499701">
        <mark key="[" line="67" column="16" />
        <mark key="]" line="82" column="21" />
        <mark key="." line="82" column="21" />
        <mark key="^" line="82" column="21" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Constants.cs" timestamp="1571017117631">
        <mark key="[" line="16" column="0" />
        <mark key="]" line="16" column="0" />
        <mark key="." line="16" column="0" />
      </file>
      <file name="/ImageViewModel.cs" timestamp="1571005080918">
        <mark key="[" line="32" column="30" />
        <mark key="]" line="32" column="91" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Services/Images/ImageSize.cs" timestamp="1571009784424">
        <mark key="[" line="1" column="4" />
        <mark key="]" line="2" column="0" />
        <mark key="^" line="14" column="27" />
        <mark key="." line="1" column="1" />
      </file>
      <file name="C:/dev/git/selz/drachma/src/Drachma.Web/Models/ImageViewModel.cs" timestamp="1571010475162">
        <mark key="[" line="31" column="30" />
        <mark key="]" line="31" column="90" />
      </file>
    </filemarks>
    <jumps>
      <jump line="784" column="0" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/9b/1fde75c7/Path.cs" />
      <jump line="620" column="180" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="637" column="180" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="655" column="180" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="675" column="180" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="21" column="36" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="283" column="205" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="595" column="176" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="607" column="180" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/06452B71-9576-486B-AAA3-34B141B6537A/d4/67ba58bd/TimeSpan.cs" />
      <jump line="4316" column="32" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/862B9365-843C-4BF1-BA93-210C124BB523/f3/80e9d7cb/Uri.cs" />
      <jump line="109" column="55" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Extensions/UriExtensions.cs" />
      <jump line="146" column="15" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/ImageUrlHelper.cs" />
      <jump line="1352" column="27" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/862B9365-843C-4BF1-BA93-210C124BB523/f3/80e9d7cb/Uri.cs" />
      <jump line="72" column="11" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/CDNHelper.cs" />
      <jump line="61" column="0" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/CDNHelper.cs" />
      <jump line="62" column="11" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/862B9365-843C-4BF1-BA93-210C124BB523/87/b155264c/UriBuilder.cs" />
      <jump line="739" column="59" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Extensions/StringExtensions.cs" />
      <jump line="23" column="130" filename="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api/Mapping/BlogPosts/BlogPostProfile.cs" />
      <jump line="36" column="17" filename="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/BlogPosts/BlogPostScenarios.cs" />
      <jump line="29" column="0" filename="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/BlogPosts/BlogPostScenarios.cs" />
      <jump line="500" column="76" filename="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/BlogPosts/BlogPostScenarios.cs" />
      <jump line="55" column="54" filename="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api.FunctionalTests/Base/FakeBlogPosts.cs" />
    </jumps>
    <registers>
      <register name="&quot;" type="4">
        <text>blogPostId</text>
      </register>
      <register name="c" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgIHIuCg==</text>
      </register>
      <register name="+" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgIHIuCg==</text>
      </register>
      <register name="-" type="4">
        <text>FakeBlogPosts.ImageUrlTypes[0]</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxaZXJvXD4=</text>
      </register>
      <register name="0" type="4">
        <text>ImageUrls</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">Cgo=</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgIAo=</text>
      </register>
      <register name="3" type="4">
        <text encoding="base64">IFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEdldF9ibG9ncG9zdF9ieV9pZF93aXRoX2ltYWdlX2FuZF9yZXNwb25zZV9vaygpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1c2luZyAodmFyIHNjb3BlID0gc2VydmVyLkhvc3QuU2VydmljZXMuQ3JlYXRlU2NvcGUoKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVwb3NpdG9yeSA9IHNjb3BlLlNlcnZpY2VQcm92aWRlci5HZXRTZXJ2aWNlPElSZXBvc2l0b3J5PEJsb2dQb3N0Pj4oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGVyID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFNlcnZpY2U8SU1hcHBlcj4oKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0cyA9IGF3YWl0IEdldFRlc3RCbG9nUG9zdHNMaXN0KHJlcG9zaXRvcnkpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdCA9IGJsb2dQb3N0cy5XaGVyZShiID0+IHN0cmluZy5Jc051bGxPckVtcHR5KGIuSW1hZ2VzLk9yaWdpbmFsKSkuRmlyc3QoKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5HZXRCeUlkQXN5bmMoYmxvZ1Bvc3QuSWQuVG9TdHJpbmcoKSwgQ29ycmVsYXRpb25JZCk7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuSGVhZGVycy5TaG91bGQoKS5Db250YWluKGhlYWRlciA9PiBoZWFkZXIuS2V5ID09ICJYLUNvcnJlbGF0aW9uLUlkIik7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgQXNzZXJ0LmJsbwogICAgICAgICAgICAgICAgICAgIEFzc2VydEJsb2dQb3N0RGV0YWlscyhibG9nUG9zdCwgcmVzcG9uc2UuQ29udGVudCwgbWFwcGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0=</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgICAgICBbSW5saW5lRGF0YSgiaHR0cHM6Ly9zZWx6aW1nLXRlc3QuczMuYW1hem9uYXdzLmNvbSIpXQo=</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgICAgICAgICAgImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbSIsCg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICAgICAgCg==</text>
      </register>
      <register name="7" type="4">
        <text encoding="base64">ewogICAgICAgIHB1YmxpYyBzdHJpbmcgQ29ycmVsYXRpb25JZCA9PiBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpOwoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBHZXRfYmxvZ3Bvc3RfYnlfaWRfYW5kX3Jlc3BvbnNlX29rKCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBzZXJ2ZXIuSG9zdC5TZXJ2aWNlcy5DcmVhdGVTY29wZSgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciByZXBvc2l0b3J5ID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFNlcnZpY2U8SVJlcG9zaXRvcnk8QmxvZ1Bvc3Q+PigpOwogICAgICAgICAgICAgICAgICAgIHZhciBtYXBwZXIgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0U2VydmljZTxJTWFwcGVyPigpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3RzID0gYXdhaXQgR2V0VGVzdEJsb2dQb3N0c0xpc3QocmVwb3NpdG9yeSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0ID0gYmxvZ1Bvc3RzLkZpcnN0KHAgPT4gcC5TaG9wSWQgPT0gQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQpOwogICAgICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkdldEJ5SWRBc3luYyhibG9nUG9zdC5JZC5Ub1N0cmluZygpLCBDb3JyZWxhdGlvbklkKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5IZWFkZXJzLlNob3VsZCgpLkNvbnRhaW4oaGVhZGVyID0+IGhlYWRlci5LZXkgPT0gIlgtQ29ycmVsYXRpb24tSWQiKTsKICAgICAgICAgICAgICAgICAgICBBc3NlcnRCbG9nUG9zdERldGFpbHMoYmxvZ1Bvc3QsIHJlc3BvbnNlLkNvbnRlbnQsIG1hcHBlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEdldF9ibG9ncG9zdF9ieV9pbnZhbGlkX2lkX2FuZF9yZXNwb25zZV9iYWRfcmVxdWVzdCgpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgc2hvcENsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwoKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHNob3BDbGllbnQuR2V0QnlJZEFzeW5jKCJub3QgYSB2YWxpZCBpZCIsIENvcnJlbGF0aW9uSWQsIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCkpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQmFkUmVxdWVzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEdldF9ibG9ncG9zdF9pZF9kb2VzbnRfZXhpc3RfcmVzcG9uc2Vfbm90X2ZvdW5kKCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QnlJZEFzeW5jKE9iamVjdElkLkVtcHR5LlRvU3RyaW5nKCksIEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCksIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCkpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuTm90Rm91bmQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBHZXRfYmxvZ3Bvc3RfYnlfc2x1Z19hbmRfcmVzcG9uc2Vfb2soKQogICAgICAgIHsKICAgICAgICAgICAgdXNpbmcgKHZhciBzZXJ2ZXIgPSBDcmVhdGVTZXJ2ZXIoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdXNpbmcgKHZhciBzY29wZSA9IHNlcnZlci5Ib3N0LlNlcnZpY2VzLkNyZWF0ZVNjb3BlKCkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9zaXRvcnkgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0U2VydmljZTxJUmVwb3NpdG9yeTxCbG9nUG9zdD4+KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBlciA9IHNjb3BlLlNlcnZpY2VQcm92aWRlci5HZXRTZXJ2aWNlPElNYXBwZXI+KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdHMgPSBhd2FpdCBHZXRUZXN0QmxvZ1Bvc3RzTGlzdChyZXBvc2l0b3J5KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3QgPSBibG9nUG9zdHMuRmlyc3QoYiA9PiBiLlNob3BJZCA9PSBDb25zdGFudHMuRGVmYXVsdFNob3BJZCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QnlTbHVnQXN5bmMoYmxvZ1Bvc3QuU2x1ZywgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuSGVhZGVycy5TaG91bGQoKS5Db250YWluKGhlYWRlciA9PiBoZWFkZXIuS2V5ID09ICJYLUNvcnJlbGF0aW9uLUlkIik7CiAgICAgICAgICAgICAgICAgICAgQXNzZXJ0QmxvZ1Bvc3REZXRhaWxzKGJsb2dQb3N0LCByZXNwb25zZS5Db250ZW50LCBtYXBwZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBHZXRfc2xpY2VkX2xpc3Rfc2hvdWxkX3JldHVybl9lcnJvcl9pZl9saW1pdF9leGNlZWRzXzUwKCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuRmluZEFzeW5jKG5ldyBCbG9nUG9zdFNsaWNlZExpc3RSZXF1ZXN0CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgTGltaXQgPSAxMDAsCiAgICAgICAgICAgICAgICB9LCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpKTsKCiAgICAgICAgICAgICAgICByZXNwb25zZS5TaG91bGQoKS5Ob3RCZU51bGwoKTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQmFkUmVxdWVzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEZpbmRfc2xpY2VkX2xpc3Rfc2hvdWxkX3JldHVybl9PaygpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1c2luZyAodmFyIHNjb3BlID0gc2VydmVyLkhvc3QuU2VydmljZXMuQ3JlYXRlU2NvcGUoKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9zaXRvcnkgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0U2VydmljZTxJUmVwb3NpdG9yeTxCbG9nUG9zdD4+KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0cyA9IGF3YWl0IEdldFRlc3RCbG9nUG9zdHNMaXN0KHJlcG9zaXRvcnkpOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEJsb2dQb3N0cyA9IGJsb2dQb3N0cy5XaGVyZShiID0+IGIuU2hvcElkID09IENvbnN0YW50cy5EZWZhdWx0U2hvcElkKTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50IHBhZ2VTaXplID0gMjsKICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxQYWdlcyA9IChpbnQpIE1hdGguQ2VpbGluZygoZG91YmxlKSBmaWx0ZXJlZEJsb2dQb3N0cy5Db3VudCgpIC8gcGFnZVNpemUpOwoKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgc3RhcnRpbmdBZnRlciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSAwOwoKICAgICAgICAgICAgICAgICAgICAvL2xvb3AgZm9yd2FyZAogICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYWdlIDwgdG90YWxQYWdlcykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBuZXcgQmxvZ1Bvc3RTbGljZWRMaXN0UmVxdWVzdAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaW1pdCA9IHBhZ2VTaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnRpbmdBZnRlciA9IHN0YXJ0aW5nQWZ0ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuRmluZEFzeW5jKGZpbHRlciwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXNwb25zZS5FbnN1cmVTdWNjZXNzU3RhdHVzQ29kZUFzeW5jKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLlNob3VsZCgpLk5vdEJlTnVsbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSsrOwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydGluZ0FmdGVyID0gcmVzcG9uc2UuQ29udGVudC5QYWdpbmF0aW9uLk5leHRDdXJzb3I7CgogICAgICAgICAgICAgICAgICAgICAgICBBc3NlcnRTbGljZWRMaXN0KGZpbHRlcmVkQmxvZ1Bvc3RzLCByZXNwb25zZS5Db250ZW50LCBwYWdlLCB0b3RhbFBhZ2VzLCBwYWdlU2l6ZSwgZmlsdGVyLkxpbWl0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLlN0YXJ0aW5nQWZ0ZXIsIGZpbHRlci5FbmRpbmdCZWZvcmUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgW0ZhY3RdCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgRGVsZXRlX2Jsb2dwb3N0X3dpdGhfdmFsaWRfaWRfYW5kX3JldHVybl9ub0NvbnRlbnQoKQogICAgICAgIHsKICAgICAgICAgICAgdXNpbmcgKHZhciBzZXJ2ZXIgPSBDcmVhdGVTZXJ2ZXIoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdXNpbmcgKHZhciBzY29wZSA9IHNlcnZlci5Ib3N0LlNlcnZpY2VzLkNyZWF0ZVNjb3BlKCkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwogICAgICAgICAgICAgICAgICAgIHZhciByZXBvc2l0b3J5ID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFNlcnZpY2U8SVJlcG9zaXRvcnk8QmxvZ1Bvc3Q+PigpOwogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdCA9IChhd2FpdCBHZXRUZXN0QmxvZ1Bvc3RzTGlzdChyZXBvc2l0b3J5KSkuTGFzdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdElkID0gYmxvZ1Bvc3QuSWQuVG9TdHJpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkRlbGV0ZUFzeW5jKGJsb2dQb3N0SWQsIEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCksIGJsb2dQb3N0LlNob3BJZC5Ub1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgICAgICBibG9nUG9zdC5DcmVhdGVkQnkpOwoKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5TaG91bGQoKS5Ob3RCZU51bGwoKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5TdGF0dXNDb2RlLlNob3VsZCgpLkJlKEh0dHBTdGF0dXNDb2RlLk5vQ29udGVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIERlbGV0ZV9ibG9ncG9zdF9pbnZhbGlkX2lkX2FuZF9yZXNwb25zZV9iYWRfcmVxdWVzdCgpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuRGVsZXRlQXN5bmMoIkludmFsaWQgaWQiLCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpLCBDb25zdGFudHMuRGVmYXVsdFVzZXJJZCk7CgogICAgICAgICAgICAgICAgcmVzcG9uc2UuU2hvdWxkKCkuTm90QmVOdWxsKCk7CiAgICAgICAgICAgICAgICByZXNwb25zZS5TdGF0dXNDb2RlLlNob3VsZCgpLkJlKEh0dHBTdGF0dXNDb2RlLkJhZFJlcXVlc3QpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBEZWxldGVfYmxvZ1Bvc3RfZG9lc19ub3RfZXhpc3RfYW5kX3Jlc3BvbnNlX25vdF9mb3VuZCgpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuRGVsZXRlQXN5bmMoT2JqZWN0SWQuR2VuZXJhdGVOZXdJZCgpLlRvU3RyaW5nKCksIENvcnJlbGF0aW9uSWQsIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCksIENvbnN0YW50cy5EZWZhdWx0VXNlcklkKTsKCiAgICAgICAgICAgICAgICByZXNwb25zZS5TdGF0dXNDb2RlLlNob3VsZCgpLkJlKEh0dHBTdGF0dXNDb2RlLk5vdEZvdW5kKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgW0ZhY3RdCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgQ3JlYXRlX2Jsb2dfcG9zdF90YWdzX25vdF9leGlzdF9iYWRfcmVxdWVzdCgpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1c2luZyAodmFyIHNjb3BlID0gc2VydmVyLkhvc3QuU2VydmljZXMuQ3JlYXRlU2NvcGUoKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdFRvQ3JlYXRlID0gRmFrZUJsb2dQb3N0cy5CbG9nUG9zdFJlcXVlc3RGYWtlci5HZW5lcmF0ZSgxKS5GaXJzdE9yRGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgbm90RXhpc3RJZDEgPSBPYmplY3RJZC5HZW5lcmF0ZU5ld0lkKCkuVG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbm90RXhpc3RJZDIgPSBPYmplY3RJZC5HZW5lcmF0ZU5ld0lkKCkuVG9TdHJpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgYmxvZ1Bvc3RUb0NyZWF0ZS5UYWdzLkFkZChub3RFeGlzdElkMSk7CiAgICAgICAgICAgICAgICAgICAgYmxvZ1Bvc3RUb0NyZWF0ZS5UYWdzLkFkZChub3RFeGlzdElkMik7CgogICAgICAgICAgICAgICAgICAgIHZhciBibG9nUG9zdCA9IGF3YWl0IGNsaWVudC5DcmVhdGVBc3luYyhibG9nUG9zdFRvQ3JlYXRlLCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpLCBDb25zdGFudHMuRGVmYXVsdFVzZXJJZCk7CgogICAgICAgICAgICAgICAgICAgIGJsb2dQb3N0LlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQmFkUmVxdWVzdCk7CiAgICAgICAgICAgICAgICAgICAgYmxvZ1Bvc3QuRXJyb3IuQ29udGVudC5TaG91bGQoKS5Db250YWluKG5vdEV4aXN0SWQxKTsKICAgICAgICAgICAgICAgICAgICBibG9nUG9zdC5FcnJvci5Db250ZW50LlNob3VsZCgpLkNvbnRhaW4obm90RXhpc3RJZDIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBDcmVhdGVfYmxvZ19wb3N0X3ZhbGlkX3JlcXVlc3Rfb2soKQogICAgICAgIHsKICAgICAgICAgICAgdXNpbmcgKHZhciBzZXJ2ZXIgPSBDcmVhdGVTZXJ2ZXIoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdXNpbmcgKHZhciBzY29wZSA9IHNlcnZlci5Ib3N0LlNlcnZpY2VzLkNyZWF0ZVNjb3BlKCkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3RUb0NyZWF0ZSA9IEZha2VCbG9nUG9zdHMuQmxvZ1Bvc3RSZXF1ZXN0RmFrZXIuR2VuZXJhdGUoMSkuRmlyc3RPckRlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0UmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuQ3JlYXRlQXN5bmMoYmxvZ1Bvc3RUb0NyZWF0ZSwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgICAgICBibG9nUG9zdFJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQ3JlYXRlZCk7CiAgICAgICAgICAgICAgICAgICAgQXNzZXJ0QmxvZ1Bvc3RSZXF1ZXN0KGJsb2dQb3N0VG9DcmVhdGUsIGJsb2dQb3N0UmVzcG9uc2UuQ29udGVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFkZF9pbWFnZV9ieV91cmxfdG9fYmxvZ19wb3N0X3ZhbGlkX3JlcXVlc3Rfb2soKQogICAgICAgIHsKICAgICAgICAgICAgdXNpbmcgKHZhciBzZXJ2ZXIgPSBDcmVhdGVTZXJ2ZXIoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwoKICAgICAgICAgICAgICAgIHZhciBhZGRJbWFnZVJlcXVlc3QgPSBuZXcgQWRkSW1hZ2VSZXF1ZXN0CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVXJsID0gImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20uYXUvaW1hZ2VzL2JyYW5kaW5nL2dvb2dsZWxvZ28vMXgvZ29vZ2xlbG9nb19jb2xvcl8yNzJ4OTJkcC5wbmciCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpZCA9IEZha2VCbG9nUG9zdHMuQWxsLkZpcnN0KCkuSWQ7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuQWRkSW1hZ2VBc3luYyhpZC5Ub1N0cmluZygpLCBhZGRJbWFnZVJlcXVlc3QsIENvcnJlbGF0aW9uSWQsIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCksIENvbnN0YW50cy5EZWZhdWx0VXNlcklkKTsKCiAgICAgICAgICAgICAgICByZXNwb25zZS5FcnJvcj8uQ29udGVudD8uU2hvdWxkKCkuQmVOdWxsKCk7CgogICAgICAgICAgICAgICAgcmVzcG9uc2UuU3RhdHVzQ29kZS5TaG91bGQoKS5CZShIdHRwU3RhdHVzQ29kZS5PSyk7CiAgICAgICAgICAgICAgICByZXNwb25zZS5Db250ZW50LlNob3VsZCgpLk5vdEJlTnVsbCgpOwogICAgICAgICAgICAgICAgcmVzcG9uc2UuQ29udGVudC5VcmwuU2hvdWxkKCkuTm90QmVOdWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFkZF9iYXNlNjRfZmlsZV90b19ibG9nX3Bvc3RfcmVxdWVzdF9vaygpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CgogICAgICAgICAgICAgICAgdmFyIGFkZEltYWdlUmVxdWVzdCA9IG5ldyBBZGRJbWFnZVJlcXVlc3QKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBBdHRhY2htZW50ID0gQ29udmVydC5Ub0Jhc2U2NFN0cmluZyhFbmNvZGluZy5VVEY4LkdldEJ5dGVzKCJmaWxlIGNvbnRlbnQiKSksCiAgICAgICAgICAgICAgICAgICAgRmlsZW5hbWUgPSAicGxhY2Vob2xkZXIuanBnIgogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaWQgPSBGYWtlQmxvZ1Bvc3RzLkFsbC5GaXJzdCgpLklkOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkFkZEltYWdlQXN5bmMoaWQuVG9TdHJpbmcoKSwgYWRkSW1hZ2VSZXF1ZXN0LCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpLCBDb25zdGFudHMuRGVmYXVsdFVzZXJJZCk7CgogICAgICAgICAgICAgICAgcmVzcG9uc2UuU3RhdHVzQ29kZS5TaG91bGQoKS5CZShIdHRwU3RhdHVzQ29kZS5PSyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFkZF9pbnZhbGlkX2Jhc2U2NF9jb250ZW50X2ZpbGVfdG9fYmxvZ19wb3N0X2JhZF9yZXF1ZXN0KCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgYWRkSW1hZ2VSZXF1ZXN0ID0gbmV3IEFkZEltYWdlUmVxdWVzdAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEF0dGFjaG1lbnQgPSBDb252ZXJ0LlRvQmFzZTY0U3RyaW5nKEVuY29kaW5nLlVURjguR2V0Qnl0ZXMoIkludmFsaWQgYmFzZTY0IGVuY29kZWQgZmlsZSBjb250ZW50IikpLAogICAgICAgICAgICAgICAgICAgIEZpbGVuYW1lID0gInBsYWNlaG9sZGVyLmpwZyIKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGlkID0gRmFrZUJsb2dQb3N0cy5BbGwuRmlyc3QoKS5JZDsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5BZGRJbWFnZUFzeW5jKGlkLlRvU3RyaW5nKCksIGFkZEltYWdlUmVxdWVzdCwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuT0spOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbVGhlb3J5XQogICAgICAgIFtJbmxpbmVEYXRhKCJodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2ltYWdlLmpwZyIpXQogICAgICAgIFtJbmxpbmVEYXRhKCJodHRwOi8vbG9jYWxob3N0L2ltYWdlLmpwZyIpXQogICAgICAgIFtJbmxpbmVEYXRhKCJmdHA6Ly9ibGEuY29tL2ltYWdlLmpwZyIpXQogICAgICAgIFtJbmxpbmVEYXRhKCJjOi9wYXRoLmpwZyIpXQogICAgICAgIFtJbmxpbmVEYXRhKCJodHRwOi8vbm90ZXhpc3QuY29tL25vdGV4aXQuanBnIildCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgQWRkX2ltYWdlX3RvX2Jsb2dfcG9zdF9pbnZhbGlkX3VybF9yZXF1ZXN0X2JhZF9yZXF1ZXN0KHN0cmluZyB1cmwpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CgogICAgICAgICAgICAgICAgdmFyIGFkZEltYWdlUmVxdWVzdCA9IG5ldyBBZGRJbWFnZVJlcXVlc3QoKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFVybCA9IHVybAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaWQgPSBGYWtlQmxvZ1Bvc3RzLkFsbC5GaXJzdCgpLklkOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkFkZEltYWdlQXN5bmMoaWQuVG9TdHJpbmcoKSwgYWRkSW1hZ2VSZXF1ZXN0LCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpLCBDb25zdGFudHMuRGVmYXVsdFVzZXJJZCk7CgogICAgICAgICAgICAgICAgcmVzcG9uc2UuU3RhdHVzQ29kZS5TaG91bGQoKS5CZShIdHRwU3RhdHVzQ29kZS5CYWRSZXF1ZXN0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgW1RoZW9yeV0KICAgICAgICBbSW5saW5lRGF0YSgiIiwgIiIpXQogICAgICAgIFtJbmxpbmVEYXRhKG51bGwsIG51bGwpXQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFkZF9pbWFnZV93aXRoX2JvdGhfdXJsX2FuZF9hdHRhY2htZW50X2VtcHR5X2JhZF9yZXF1ZXN0KHN0cmluZyB1cmwsIHN0cmluZyBhdHRhY2htZW50KQogICAgICAgIHsKICAgICAgICAgICAgdXNpbmcgKHZhciBzZXJ2ZXIgPSBDcmVhdGVTZXJ2ZXIoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IHNlcnZlci5HZXRCbG9nUG9zdENsaWVudCgpOwoKICAgICAgICAgICAgICAgIHZhciBhZGRJbWFnZVJlcXVlc3QgPSBuZXcgQWRkSW1hZ2VSZXF1ZXN0KCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBVcmwgPSB1cmwsCiAgICAgICAgICAgICAgICAgICAgQXR0YWNobWVudCA9IGF0dGFjaG1lbnQKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGlkID0gRmFrZUJsb2dQb3N0cy5BbGwuRmlyc3QoKS5JZDsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5BZGRJbWFnZUFzeW5jKGlkLlRvU3RyaW5nKCksIGFkZEltYWdlUmVxdWVzdCwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQmFkUmVxdWVzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFkZF9pbWFnZV93aXRoX2ludmFsaWRfaW1hZ2VfZXh0ZW5zaW9uX2JhZF9yZXF1ZXN0KCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgYWRkSW1hZ2VSZXF1ZXN0ID0gbmV3IEFkZEltYWdlUmVxdWVzdAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEZpbGVuYW1lID0gIk9ubHlJbWFnZUZpbGVJc1N1cHBvcnRlZC50eHQiLAogICAgICAgICAgICAgICAgICAgIEF0dGFjaG1lbnQgPSAicGxhY2Vob2xkZXIgdGV4dCIKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGlkID0gRmFrZUJsb2dQb3N0cy5BbGwuRmlyc3QoKS5JZDsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5BZGRJbWFnZUFzeW5jKGlkLlRvU3RyaW5nKCksIGFkZEltYWdlUmVxdWVzdCwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuQmFkUmVxdWVzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFBhdGNoX2Jsb2dfcG9zdF92YWxpZF9yZXF1ZXN0X29rKCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBzZXJ2ZXIuSG9zdC5TZXJ2aWNlcy5DcmVhdGVTY29wZSgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8vIEFycmFuZ2UKICAgICAgICAgICAgICAgICAgICB2YXIgcmVwb3NpdG9yeSA9IHNjb3BlLlNlcnZpY2VQcm92aWRlci5HZXRTZXJ2aWNlPElSZXBvc2l0b3J5PEJsb2dQb3N0Pj4oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3RzID0gYXdhaXQgR2V0VGVzdEJsb2dQb3N0c0xpc3QocmVwb3NpdG9yeSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQmxvZ1Bvc3QgPSBibG9nUG9zdHMuRmlyc3QoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0VG9VcGRhdGUgPSBGYWtlQmxvZ1Bvc3RzLkJsb2dQb3N0UmVxdWVzdEZha2VyLkdlbmVyYXRlKDEpLkZpcnN0T3JEZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEpzb25QYXRjaERvY3VtZW50PEJsb2dQb3N0UmVxdWVzdD4oKTsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LlJlcGxhY2UoaSA9PiBpLkNvbnRlbnQsIGJsb2dQb3N0VG9VcGRhdGUuQ29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5SZXBsYWNlKGkgPT4gaS5TbHVnLCBibG9nUG9zdFRvVXBkYXRlLlNsdWcpOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuUmVwbGFjZShpID0+IGkuTmFtZSwgYmxvZ1Bvc3RUb1VwZGF0ZS5OYW1lKTsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LlJlcGxhY2UoaSA9PiBpLk1ldGFEZXNjcmlwdGlvbiwgYmxvZ1Bvc3RUb1VwZGF0ZS5NZXRhRGVzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuUmVwbGFjZShpID0+IGkuUGFnZVRpdGxlLCBibG9nUG9zdFRvVXBkYXRlLlBhZ2VUaXRsZSk7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5SZXBsYWNlKGkgPT4gaS5UYWdzLCBibG9nUG9zdFRvVXBkYXRlLlRhZ3MpOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuUmVwbGFjZShpID0+IGkuSW1hZ2UuVXJsLCBibG9nUG9zdFRvVXBkYXRlLkltYWdlLlVybCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEFjdAogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5VcGRhdGVBc3luYyhvcmlnaW5hbEJsb2dQb3N0LklkLlRvU3RyaW5nKCksIHJlcXVlc3QsIENvcnJlbGF0aW9uSWQsIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCksIENvbnN0YW50cy5EZWZhdWx0VXNlcklkKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXNwb25zZS5FbnN1cmVTdWNjZXNzU3RhdHVzQ29kZUFzeW5jKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEFzc2VydAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkhlYWRlcnMuQ29udGFpbnMoIlgtQ29ycmVsYXRpb24tSWQiKS5TaG91bGQoKS5CZVRydWUoKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5TdGF0dXNDb2RlLlNob3VsZCgpLkJlKEh0dHBTdGF0dXNDb2RlLk9LKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5Db250ZW50LlNob3VsZCgpLk5vdEJlTnVsbCgpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkNvbnRlbnQuU2x1Zy5TaG91bGQoKS5CZShibG9nUG9zdFRvVXBkYXRlLlNsdWcpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkNvbnRlbnQuQ29udGVudC5TaG91bGQoKS5CZShibG9nUG9zdFRvVXBkYXRlLkNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkNvbnRlbnQuTWV0YURlc2NyaXB0aW9uLlNob3VsZCgpLkJlKGJsb2dQb3N0VG9VcGRhdGUuTWV0YURlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5Db250ZW50LlBhZ2VUaXRsZS5TaG91bGQoKS5CZShibG9nUG9zdFRvVXBkYXRlLlBhZ2VUaXRsZSk7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuQ29udGVudC5UYWdzLlNob3VsZCgpLkJlRXF1aXZhbGVudFRvKGJsb2dQb3N0VG9VcGRhdGUuVGFncyk7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuQ29udGVudC5JbWFnZS5TaG91bGQoKS5Ob3RCZU51bGwoKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5Db250ZW50LkltYWdlLk9yaWdpbmFsLlNob3VsZCgpLkJlKGJsb2dQb3N0VG9VcGRhdGUuSW1hZ2UuVXJsKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRXhjZXB0IHNob3VsZCBOT1QgYmUgdXBkYXRlZAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkNvbnRlbnQuRXhjZXJwdC5TaG91bGQoKS5CZShvcmlnaW5hbEJsb2dQb3N0LkV4Y2VycHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBVcGRhdGVfYmxvZ19wb3N0X3RhZ3Nfbm90X2V4aXN0X2JhZF9yZXF1ZXN0KCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBzZXJ2ZXIuSG9zdC5TZXJ2aWNlcy5DcmVhdGVTY29wZSgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0VG9DcmVhdGUgPSBGYWtlQmxvZ1Bvc3RzLkJsb2dQb3N0UmVxdWVzdEZha2VyLkdlbmVyYXRlKDEpLkZpcnN0T3JEZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBub3RFeGlzdElkMSA9IE9iamVjdElkLkdlbmVyYXRlTmV3SWQoKS5Ub1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgIHZhciBub3RFeGlzdElkMiA9IE9iamVjdElkLkdlbmVyYXRlTmV3SWQoKS5Ub1N0cmluZygpOwoKICAgICAgICAgICAgICAgICAgICBibG9nUG9zdFRvQ3JlYXRlLlRhZ3MuQWRkKG5vdEV4aXN0SWQxKTsKICAgICAgICAgICAgICAgICAgICBibG9nUG9zdFRvQ3JlYXRlLlRhZ3MuQWRkKG5vdEV4aXN0SWQyKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0ID0gYXdhaXQgY2xpZW50LkNyZWF0ZUFzeW5jKGJsb2dQb3N0VG9DcmVhdGUsIENvcnJlbGF0aW9uSWQsIENvbnN0YW50cy5EZWZhdWx0U2hvcElkLlRvU3RyaW5nKCksIENvbnN0YW50cy5EZWZhdWx0VXNlcklkKTsKCiAgICAgICAgICAgICAgICAgICAgYmxvZ1Bvc3QuU3RhdHVzQ29kZS5TaG91bGQoKS5CZShIdHRwU3RhdHVzQ29kZS5CYWRSZXF1ZXN0KTsKICAgICAgICAgICAgICAgICAgICBibG9nUG9zdC5FcnJvci5Db250ZW50LlNob3VsZCgpLkNvbnRhaW4obm90RXhpc3RJZDEpOwogICAgICAgICAgICAgICAgICAgIGJsb2dQb3N0LkVycm9yLkNvbnRlbnQuU2hvdWxkKCkuQ29udGFpbihub3RFeGlzdElkMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICBbRmFjdF0KICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBSZW1vdmVfYmxvZ19wb3N0X2ltYWdlX3ZhbGlkX3JlcXVlc3Rfbm9fY29udGVudCgpCiAgICAgICAgewogICAgICAgICAgICB1c2luZyAodmFyIHNlcnZlciA9IENyZWF0ZVNlcnZlcigpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gc2VydmVyLkdldEJsb2dQb3N0Q2xpZW50KCk7CiAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3QgPSBGYWtlQmxvZ1Bvc3RzLkFsbC5MYXN0KCk7CgogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlJlbW92ZUltYWdlQXN5bmMoYmxvZ1Bvc3QuSWQuVG9TdHJpbmcoKSwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuTm9Db250ZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIFtGYWN0XQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIFJlbW92ZV9ibG9nX3Bvc3RfaW1hZ2Vfbm90X2V4aXN0X2Jsb2dwb3N0X2JhZF9yZXF1ZXN0KCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuUmVtb3ZlSW1hZ2VBc3luYyhPYmplY3RJZC5HZW5lcmF0ZU5ld0lkKCkuVG9TdHJpbmcoKSwgQ29ycmVsYXRpb25JZCwgQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQuVG9TdHJpbmcoKSwgQ29uc3RhbnRzLkRlZmF1bHRVc2VySWQpOwoKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlN0YXR1c0NvZGUuU2hvdWxkKCkuQmUoSHR0cFN0YXR1c0NvZGUuTm90Rm91bmQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgW0ZhY3RdCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgUmVtb3ZlX2Jsb2dfcG9zdF9pbWFnZV9pbnZhbGlkX2lkX2JhZF9yZXF1ZXN0KCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuUmVtb3ZlSW1hZ2VBc3luYygiaW52YWxpZEJsb2dQb3N0SWQiLCBDb3JyZWxhdGlvbklkLCBDb25zdGFudHMuRGVmYXVsdFNob3BJZC5Ub1N0cmluZygpLCBDb25zdGFudHMuRGVmYXVsdFVzZXJJZCk7CgogICAgICAgICAgICAgICAgcmVzcG9uc2UuU3RhdHVzQ29kZS5TaG91bGQoKS5CZShIdHRwU3RhdHVzQ29kZS5CYWRSZXF1ZXN0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIFtUaGVvcnldCiAgICAgICAgW0lubGluZURhdGEoIiJodHRwczovL3NlbHppbWctdGVzdC5zMy5hbWF6b25hd3MuY29tIildCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgR2V0X2Jsb2dwb3N0X2J5X2lkX3dpdGhfaW1hZ2VfYW5kX3Jlc3BvbnNlX29rKCkKICAgICAgICB7CiAgICAgICAgICAgIHVzaW5nICh2YXIgc2VydmVyID0gQ3JlYXRlU2VydmVyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgc2NvcGUgPSBzZXJ2ZXIuSG9zdC5TZXJ2aWNlcy5DcmVhdGVTY29wZSgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciByZXBvc2l0b3J5ID0gc2NvcGUuU2VydmljZVByb3ZpZGVyLkdldFNlcnZpY2U8SVJlcG9zaXRvcnk8QmxvZ1Bvc3Q+PigpOwogICAgICAgICAgICAgICAgICAgIHZhciBtYXBwZXIgPSBzY29wZS5TZXJ2aWNlUHJvdmlkZXIuR2V0U2VydmljZTxJTWFwcGVyPigpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvZ1Bvc3RzID0gYXdhaXQgR2V0VGVzdEJsb2dQb3N0c0xpc3QocmVwb3NpdG9yeSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2dQb3N0ID0gYmxvZ1Bvc3RzLkZpcnN0KHAgPT4gcC5TaG9wSWQgPT0gQ29uc3RhbnRzLkRlZmF1bHRTaG9wSWQpOwogICAgICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBzZXJ2ZXIuR2V0QmxvZ1Bvc3RDbGllbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkdldEJ5SWRBc3luYyhibG9nUG9zdC5JZC5Ub1N0cmluZygpLCBDb3JyZWxhdGlvbklkKTsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5IZWFkZXJzLlNob3VsZCgpLkNvbnRhaW4oaGVhZGVyID0+IGhlYWRlci5LZXkgPT0gIlgtQ29ycmVsYXRpb24tSWQiKTsKICAgICAgICAgICAgICAgICAgICBBc3NlcnRCbG9nUG9zdERldGFpbHMoYmxvZ1Bvc3QsIHJlc3BvbnNlLkNvbnRlbnQsIG1hcHBlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICBwcml2YXRlIHZvaWQgQXNzZXJ0U2xpY2VkTGlzdChJRW51bWVyYWJsZTxCbG9nUG9zdD4gYmxvZ1Bvc3RzLCBTbGljZWRMaXN0UmVzcG9uc2U8QmxvZ1Bvc3RSZXNwb25zZT4gcGFnZWRMaXN0UmVzcG9uc2UsIGludCBwYWdlLAogICAgICAgICAgICBpbnQgdG90YWxQYWdlcywgaW50IHBhZ2VTaXplLCBpbnQgbGltaXQsIHN0cmluZyBzdGFydGluZ0FmdGVyID0gbnVsbCwgc3RyaW5nIGVuZGluZ0JlZm9yZSA9IG51bGwpCiAgICAgICAgewogICAgICAgICAgICB2YXIgYmxvZ1Bvc3RzUGFnZSA9IGJsb2dQb3N0cy5PcmRlckJ5RGVzY2VuZGluZyhpID0+IGkuSWQpLlRvTGlzdCgpOwogICAgICAgICAgICBpZiAoc3RhcnRpbmdBZnRlciAhPSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBibG9nUG9zdHNQYWdlID0gYmxvZ1Bvc3RzUGFnZS5XaGVyZShpID0+IGkuSWQgPCBzdGFydGluZ0FmdGVyLlRvT2JqZWN0SWQoKSkuVG9MaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZW5kaW5nQmVmb3JlICE9IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJsb2dQb3N0c1BhZ2UgPSBibG9nUG9zdHNQYWdlLk9yZGVyQnkoaSA9PiBpLklkKS5XaGVyZShpID0+IGkuSWQgPiBlbmRpbmdCZWZvcmUuVG9PYmplY3RJZCgpKS5Ub0xpc3QoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYmxvZ1Bvc3RzUGFnZSA9IGJsb2dQb3N0c1BhZ2UuVGFrZShsaW1pdCkuT3JkZXJCeURlc2NlbmRpbmcoaSA9PiBpLklkKS5Ub0xpc3QoKTsKCiAgICAgICAgICAgIEFzc2VydC5FcXVhbChsaW1pdCwgcGFnZWRMaXN0UmVzcG9uc2UuUGFnaW5hdGlvbi5MaW1pdCk7CiAgICAgICAgICAgIEFzc2VydC5FcXVhbChibG9nUG9zdHNQYWdlLkNvdW50LCBwYWdlZExpc3RSZXNwb25zZS5EYXRhLkNvdW50KCkpOwoKICAgICAgICAgICAgaWYgKHBhZ2UgPT0gMSkgLy8gRmlyc3QgcGFnZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBBc3NlcnQuRmFsc2UocGFnZWRMaXN0UmVzcG9uc2UuUGFnaW5hdGlvbi5IYXNQcmV2aW91cyk7CgogICAgICAgICAgICAgICAgaWYgKGJsb2dQb3N0c1BhZ2UuQ291bnQgPj0gcGFnZVNpemUpCiAgICAgICAgICAgICAgICAgICAgQXNzZXJ0LlRydWUocGFnZWRMaXN0UmVzcG9uc2UuUGFnaW5hdGlvbi5IYXNOZXh0KTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBBc3NlcnQuRmFsc2UocGFnZWRMaXN0UmVzcG9uc2UuUGFnaW5hdGlvbi5IYXNOZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChwYWdlID09IHRvdGFsUGFnZXMpIC8vIExhc3QgUGFnZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBBc3NlcnQuVHJ1ZShwYWdlZExpc3RSZXNwb25zZS5QYWdpbmF0aW9uLkhhc1ByZXZpb3VzKTsKICAgICAgICAgICAgICAgIEFzc2VydC5GYWxzZShwYWdlZExpc3RSZXNwb25zZS5QYWdpbmF0aW9uLkhhc05leHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgLy8gTWlkZGxlIHBhZ2VzCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEFzc2VydC5UcnVlKHBhZ2VkTGlzdFJlc3BvbnNlLlBhZ2luYXRpb24uSGFzUHJldmlvdXMpOwogICAgICAgICAgICAgICAgQXNzZXJ0LlRydWUocGFnZWRMaXN0UmVzcG9uc2UuUGFnaW5hdGlvbi5IYXNOZXh0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIEFzc2VydEJsb2dQb3N0RGV0YWlscyhCbG9nUG9zdCBibG9nUG9zdCwgQmxvZ1Bvc3RSZXNwb25zZSByZXNwb25zZSwgSU1hcHBlciBtYXBwZXIpCiAgICAgICAgewogICAgICAgICAgICByZXNwb25zZS5JZC5TaG91bGQoKS5CZShibG9nUG9zdC5JZC5Ub1N0cmluZygpKTsKICAgICAgICAgICAgcmVzcG9uc2UuTWV0YURlc2NyaXB0aW9uLlNob3VsZCgpLkJlKGJsb2dQb3N0Lk1ldGFEZXNjcmlwdGlvbik7CiAgICAgICAgICAgIHJlc3BvbnNlLlBhZ2VUaXRsZS5TaG91bGQoKS5CZShibG9nUG9zdC5QYWdlVGl0bGUpOwogICAgICAgICAgICByZXNwb25zZS5FeGNlcnB0LlNob3VsZCgpLkJlKGJsb2dQb3N0LkV4Y2VycHQpOwogICAgICAgICAgICByZXNwb25zZS5Db250ZW50LlNob3VsZCgpLkJlKGJsb2dQb3N0LkNvbnRlbnQpOwogICAgICAgICAgICByZXNwb25zZS5EaXNhYmxlQ29tbWVudHMuU2hvdWxkKCkuQmUoYmxvZ1Bvc3QuRGlzYWJsZUNvbW1lbnRzKTsKICAgICAgICAgICAgcmVzcG9uc2UuQ3JlYXRlZFRpbWUuU2hvdWxkKCkuQmUoYmxvZ1Bvc3QuQ3JlYXRlZFRpbWUpOwogICAgICAgICAgICByZXNwb25zZS5Jc1B1Ymxpc2hlZC5TaG91bGQoKS5CZShibG9nUG9zdC5Jc1B1Ymxpc2hlZCk7CiAgICAgICAgICAgIHJlc3BvbnNlLk5hbWUuU2hvdWxkKCkuQmUoYmxvZ1Bvc3QuTmFtZSk7CiAgICAgICAgICAgIHJlc3BvbnNlLlNob3BJZC5TaG91bGQoKS5CZShibG9nUG9zdC5TaG9wSWQpOwoKICAgICAgICAgICAgdmFyIGltYWdlUmVzcG9uc2UgPSBtYXBwZXIuTWFwPEltYWdlUmVzcG9uc2U+KGJsb2dQb3N0LkltYWdlcyk7CiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLkNvbXBhY3QuU2hvdWxkKCkuQmUoaW1hZ2VSZXNwb25zZS5Db21wYWN0KTsKICAgICAgICAgICAgcmVzcG9uc2UuSW1hZ2UuR3JhbmRlLlNob3VsZCgpLkJlKGltYWdlUmVzcG9uc2UuR3JhbmRlKTsKICAgICAgICAgICAgcmVzcG9uc2UuSW1hZ2UuSHVnZS5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLkh1Z2UpOwogICAgICAgICAgICByZXNwb25zZS5JbWFnZS5JY29uLlNob3VsZCgpLkJlKGltYWdlUmVzcG9uc2UuSWNvbik7CiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLklzRGVmYXVsdC5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLklzRGVmYXVsdCk7CiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLklzRmVhdHVyZWQuU2hvdWxkKCkuQmUoaW1hZ2VSZXNwb25zZS5Jc0ZlYXR1cmVkKTsKICAgICAgICAgICAgcmVzcG9uc2UuSW1hZ2UuTGFyZ2UuU2hvdWxkKCkuQmUoaW1hZ2VSZXNwb25zZS5MYXJnZSk7CiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLk1lZGl1bS5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLk1lZGl1bSk7CiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLk11Y2hvR3JhbmRlLlNob3VsZCgpLkJlKGltYWdlUmVzcG9uc2UuTXVjaG9HcmFuZGUpOwogICAgICAgICAgICByZXNwb25zZS5JbWFnZS5PcmlnaW5hbC5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLk9yaWdpbmFsKTsKICAgICAgICAgICAgcmVzcG9uc2UuSW1hZ2UuUGljby5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLlBpY28pOwogICAgICAgICAgICByZXNwb25zZS5JbWFnZS5TbWFsbC5TaG91bGQoKS5CZShpbWFnZVJlc3BvbnNlLlNtYWxsKTsKICAgICAgICAgICAgcmVzcG9uc2UuSW1hZ2UuVGh1bWIuU2hvdWxkKCkuQmUoaW1hZ2VSZXNwb25zZS5UaHVtYik7CgogICAgICAgICAgICByZXNwb25zZS5UYWdzLlNob3VsZCgpLkhhdmVTYW1lQ291bnQoYmxvZ1Bvc3QuVGFncyk7CiAgICAgICAgICAgIHJlc3BvbnNlLlRhZ3MuU2hvdWxkKCkuQmVFcXVpdmFsZW50VG8oYmxvZ1Bvc3QuVGFncy5TZWxlY3QodCA9PiB0LlRvU3RyaW5nKCkpKTsKICAgICAgICB9CgogICAgICAgIHByaXZhdGUgdm9pZCBBc3NlcnRCbG9nUG9zdFJlcXVlc3QoQmxvZ1Bvc3RSZXF1ZXN0IHJlcXVlc3QsIEJsb2dQb3N0UmVzcG9uc2UgcmVzcG9uc2UpCiAgICAgICAgewogICAgICAgICAgICByZXNwb25zZS5NZXRhRGVzY3JpcHRpb24uU2hvdWxkKCkuQmUocmVxdWVzdC5NZXRhRGVzY3JpcHRpb24pOwogICAgICAgICAgICByZXNwb25zZS5QYWdlVGl0bGUuU2hvdWxkKCkuQmUocmVxdWVzdC5QYWdlVGl0bGUpOwogICAgICAgICAgICByZXNwb25zZS5FeGNlcnB0LlNob3VsZCgpLkJlKHJlcXVlc3QuRXhjZXJwdCk7CiAgICAgICAgICAgIHJlc3BvbnNlLkNvbnRlbnQuU2hvdWxkKCkuQmUocmVxdWVzdC5Db250ZW50KTsKICAgICAgICAgICAgcmVzcG9uc2UuRGlzYWJsZUNvbW1lbnRzLlNob3VsZCgpLkJlKHJlcXVlc3QuRGlzYWJsZUNvbW1lbnRzKTsKICAgICAgICAgICAgcmVzcG9uc2UuSXNQdWJsaXNoZWQuU2hvdWxkKCkuQmUocmVxdWVzdC5Jc1B1Ymxpc2hlZCk7CiAgICAgICAgICAgIHJlc3BvbnNlLk5hbWUuU2hvdWxkKCkuQmUocmVxdWVzdC5OYW1lKTsKICAgICAgICAgICAgcmVzcG9uc2UuU2hvcElkLlNob3VsZCgpLkJlKENvbnN0YW50cy5EZWZhdWx0U2hvcElkKTsKCiAgICAgICAgICAgIHJlc3BvbnNlLkltYWdlLlNob3VsZCgpLk5vdEJlTnVsbCgpOwogICAgICAgICAgICByZXNwb25zZS5JbWFnZS5PcmlnaW5hbC5TaG91bGQoKS5CZShyZXF1ZXN0LkltYWdlLlVybCk7CgogICAgICAgICAgICByZXNwb25zZS5UYWdzLlNob3VsZCgpLkhhdmVTYW1lQ291bnQocmVxdWVzdC5UYWdzKTsKICAgICAgICAgICAgcmVzcG9uc2UuVGFncy5TaG91bGQoKS5CZUVxdWl2YWxlbnRUbyhyZXF1ZXN0LlRhZ3MpOwogICAgICAgIH0KICAgIH0KfQ==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwo=</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBJbWFnZXNUZXN0ID0gImh0dHBzOi8vaW1hZ2VzLXRlc3Quc2VsenN0YXRpYy5jb20iOwo=</text>
      </register>
    </registers>
    <search>
      <last-search encoding="base64">XDxaZXJvXD4=</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxaZXJvXD4=</last-pattern>
      <last-replace>~</last-replace>
      <last-substitute>f{</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry encoding="base64">XDxFZGl0YWJsZVJlZ2lvbkFyZ3VtZW50c1w+</entry>
        <entry encoding="base64">XDxwYXJ0aWFsQmxvY2tNb2RlbFw+</entry>
        <entry encoding="base64">XDxibG9ja1NldHRpbmdcPg==</entry>
        <entry encoding="base64">XDx2YWx1ZVRva2VuXD4=</entry>
        <entry encoding="base64">XDxfcGFnZVNlcnZpY2VcPg==</entry>
        <entry encoding="base64">XDxtb2NrQ29sbGVjdGlvblw+</entry>
        <entry encoding="base64">XDxJTW9uZ29Db2xsZWN0aW9uXD4=</entry>
        <entry encoding="base64">XDxmb3JtQXJndW1lbnRzXD4=</entry>
        <entry encoding="base64">XDxQaXBlXD4=</entry>
        <entry encoding="base64">XDxFeHByZXNzaW9uTGlzdFw+</entry>
        <entry encoding="base64">XDxFeHByZXNzaW9uXD4=</entry>
        <entry encoding="base64">XDxUZXJtXD4=</entry>
        <entry>f{</entry>
        <entry encoding="base64">XDx1c2VTcXVhcmVcPg==</entry>
        <entry>class</entry>
        <entry encoding="base64">XDxCdWlsZFRlc3RMb2NhbFw+</entry>
        <entry>{</entry>
        <entry encoding="base64">XDxQYXR0ZXJuXD4=</entry>
        <entry encoding="base64">XDxmYWN0b3J5XD4=</entry>
        <entry encoding="base64">XDxaZXJvXD4=</entry>
      </history-search>
      <history-cmd />
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed CLOSE_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed BACK_SLASH</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed L</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>shift ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>shift ctrl pressed 6</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>