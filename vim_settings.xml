<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Extensions/RepositoryExtensions.cs" timestamp="1558524278994">
        <mark key="[" line="27" column="35" />
        <mark key="]" line="27" column="40" />
        <mark key="." line="27" column="40" />
        <mark key="^" line="27" column="40" />
      </file>
      <file name="C:/dev/git/selz/Services.Contact/Service/src/Api/Selz.Contacts.Api/Program.cs" timestamp="1558518750260" />
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Repositories/FindFluentExtensions.cs" timestamp="1558524350471" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api/Startup.cs" timestamp="1558521956451">
        <mark key="[" line="49" column="35" />
        <mark key="]" line="49" column="35" />
        <mark key="." line="49" column="35" />
        <mark key="^" line="49" column="43" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Constants.cs" timestamp="1558522662599">
        <mark key="[" line="1273" column="55" />
        <mark key="]" line="1273" column="55" />
        <mark key="." line="1273" column="55" />
        <mark key="^" line="1272" column="60" />
      </file>
      <file name="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Repositories/RepositoryExtensions.cs" timestamp="1558523915280" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Services/Blog/BlogService.cs" timestamp="1558524978480">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="36" column="54" />
        <mark key="]" line="36" column="54" />
        <mark key="^" line="36" column="57" />
        <mark key="." line="36" column="54" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Domains/Pages/Page.cs" timestamp="1558522723872">
        <mark key="[" line="48" column="15" />
        <mark key="]" line="48" column="21" />
        <mark key="." line="48" column="21" />
        <mark key="^" line="48" column="21" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Services/RecycleBin/RecycleBinService.cs" timestamp="1558522346955">
        <mark key="[" line="22" column="0" />
        <mark key="]" line="22" column="0" />
        <mark key="." line="22" column="0" />
      </file>
      <file name="C:/dev/git/selz/Services.Contact/Service/src/Api/Selz.Contacts.Api/Startup.cs" timestamp="1558523038699" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Helpers/CountryHelper.cs" timestamp="1558524313763">
        <mark key="[" line="23" column="12" />
        <mark key="]" line="23" column="12" />
        <mark key="^" line="13" column="15" />
        <mark key="." line="23" column="12" />
      </file>
      <file name="C:/dev/git/selz/Services.Search/Service/src/Indexer/Selz.Search.Indexer/Program.cs" timestamp="1558523580521" />
      <file name="C:/dev/git/selz/Services.Contact/Service/src/Shared/Selz.Contacts.Core/Services/ContactService.cs" timestamp="1558524245922" />
      <file name="C:/dev/git/selz/Services.Contact/Service/src/Api/Selz.Contacts.Api/Controllers/ContactController.cs" timestamp="1558523436092">
        <mark key="'" line="61" column="72" />
      </file>
      <file name="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchProductStatusCountCommand.cs" timestamp="1558523737528" />
      <file name="C:/dev/git/selz/Services.Core/Api/src/Selz.Core.Api/Extensions/MvcCoreServiceCollectionExtensions.cs" timestamp="1558518820376" />
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Domains/Blog/BlogPost.cs" timestamp="1558522923439">
        <mark key="[" line="23" column="21" />
        <mark key="]" line="23" column="21" />
        <mark key="^" line="11" column="0" />
        <mark key="." line="23" column="21" />
      </file>
      <file name="/Dummy.txt" timestamp="1558521534179">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="C:/dev/git/selz/Services.Shop/Service/src/Api/Selz.Shops.Api/Program.cs" timestamp="1558518778590" />
    </filemarks>
    <jumps>
      <jump line="39" column="36" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/FileSystems/MongoFileSystem.cs" />
      <jump line="25" column="17" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Areas/Shop/Tags/FormBlock.cs" />
      <jump line="32" column="27" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Areas/Shop/Tags/Shortcut.cs" />
      <jump line="129" column="24" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Tags/BlockBase.cs" />
      <jump line="376" column="23" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Tags/BlockBase.cs" />
      <jump line="23" column="12" filename="C:/dev/git/selz/fluid/Fluid.Tests/IncludeStatementTests.cs" />
      <jump line="0" column="0" filename="/Dummy.txt" />
      <jump line="62" column="36" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/378306D0-F70E-48B5-8827-55CD0F781644/be/e25ebfea/HealthCheckResult.cs" />
      <jump line="2634" column="11" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/140125AF-6CC4-470B-B814-7A6C4240E775/91/9f856343/ElasticClient.cs" />
      <jump line="223" column="26" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/596E0EBE-46F2-45D9-833E-F929E428C400/cd/e336d694/SessionIDManager.cs" />
      <jump line="49" column="24" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/D8F7B128-F6A9-4BB2-9956-B5C44B1B0C0E/25/d8c11265/Module.cs" />
      <jump line="93" column="33" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Hosting/HostStarter.cs" />
      <jump line="51" column="41" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/Shops/ShopService.cs" />
      <jump line="113" column="12" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/Shops/ShopService.cs" />
      <jump line="244" column="40" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/Shops/ShopService.cs" />
      <jump line="245" column="28" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/Shops/ShopService.cs" />
      <jump line="61" column="41" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemingService.cs" />
      <jump line="109" column="12" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemingService.cs" />
      <jump line="344" column="29" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Infrastructure/Helpers/CryptoHelper.cs" />
      <jump line="203" column="23" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Models/ThemeDrop/ProductDrop.cs" />
      <jump line="217" column="11" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Models/ThemeDrop/ProductDrop.cs" />
      <jump line="26" column="31" filename="C:/dev/git/selz/fluid/Fluid/Ast/ForStatement.cs" />
      <jump line="1837" column="24" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Areas/Checkout/Controllers/HomeController.cs" />
      <jump line="3384" column="33" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/D9C33146-14CD-4FD8-803C-4BB2847ABD51/13/40a09ffb/AmazonS3Client.cs" />
      <jump line="2568" column="18" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/35B14027-6B2F-460C-88E9-BBFD32CEFF37/77/eaedf26e/String.cs" />
      <jump line="822" column="23" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Filters/SelzLiquidFilter.cs" />
      <jump line="874" column="31" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Filters/SelzLiquidFilter.cs" />
      <jump line="20" column="26" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Filters/SelzFluidFilterHelper.cs" />
      <jump line="263" column="20" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/Tags/BlockBase.cs" />
      <jump line="18" column="52" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Mvc/Helpers/JavaScriptHelper.cs" />
      <jump line="118" column="11" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/9DA37BC3-9D9C-44AA-9BAE-20889701F24A/b5/3f8dda13/AmazonLambdaClient.cs" />
      <jump line="72" column="15" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/836484B0-267D-488C-8D30-F28B57EFEBD9/60/SnakeCaseNamingStrategy.cs" />
      <jump line="54" column="19" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/7248E314-D490-497D-AD4A-48F9988673A8/f9/00ad49c1/IAmazonCloudWatchLogs.cs" />
      <jump line="76" column="15" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/9C7A17BB-5DDC-410C-BAAB-2223C5BA5FF0/1C/Mock.Generic.cs" />
      <jump line="96" column="19" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/CF54793C-FA34-4A3D-ADC4-93164BFA8E7C/80/90a8837d/IAmazonSQS.cs" />
      <jump line="20" column="35" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchCommand.cs" />
      <jump line="28" column="31" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchCommand.cs" />
      <jump line="62" column="51" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchCommand.cs" />
      <jump line="10" column="26" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchCommand.cs" />
      <jump line="0" column="0" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Application/Commands/SearchCommand.cs" />
      <jump line="3180" column="29" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/140125AF-6CC4-470B-B814-7A6C4240E775/1f/f3705be4/IElasticClient.cs" />
      <jump line="42" column="39" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/140125AF-6CC4-470B-B814-7A6C4240E775/18/e487d5dd/DateRangeQueryDescriptor`1.cs" />
      <jump line="16" column="8" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/HealthChecks/ElasticsearchHealthCheck.cs" />
      <jump line="12" column="30" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/378306D0-F70E-48B5-8827-55CD0F781644/b9/b34189f6/IHealthCheck.cs" />
      <jump line="23" column="37" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/43462361-4349-4445-A217-C47F27D6AFE3/ab/a240eae2/ServiceCollectionExtensions.cs" />
      <jump line="44" column="23" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/559D1F9D-2E45-46D9-8A2E-DCB8C69E6AC7/ea/9ad9a59d/HostingEnvironmentExtensions.cs" />
      <jump line="21" column="0" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Infrastructure/Middleware/SerilogMiddleware.cs" />
      <jump line="40" column="23" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Controllers/SearchController.cs" />
      <jump line="126" column="88" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Startup.cs" />
      <jump line="78" column="32" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/FB856EAB-CE2F-4FAD-84B0-3EC2F25B8805/fa/d9ec78a6/MvcJsonOptions.cs" />
      <jump line="272" column="29" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/12891E82-5FCE-44A5-81E5-BBBB579C1D49/ae/2ddc614c/JsonSerializerSettings.cs" />
      <jump line="1026" column="23" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/7377099D-91F7-42A7-BB89-6982E405EFBF/ad/5334a7d8/Log.cs" />
      <jump line="28" column="0" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/Infrastructure/Middleware/ErrorHandlingMiddleware.cs" />
      <jump line="13" column="19" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/863B81D8-9327-499B-9618-D9BE52F0AC42/d3/1ab39313/IHeaderDictionary.cs" />
      <jump line="59" column="22" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/77A26029-7DE4-4284-9A96-A0F2080CD8D7/b8/e8071d03/TestServer.cs" />
      <jump line="140" column="22" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/7377099D-91F7-42A7-BB89-6982E405EFBF/2/LoggerConfiguration.cs" />
      <jump line="22" column="44" filename="C:/dev/git/selz/Services.Core/Repository/src/Selz.Core.Repository/MongoRepositoryBase.cs" />
      <jump line="31" column="8" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/7377099D-91F7-42A7-BB89-6982E405EFBF/0/LogEventLevel.cs" />
      <jump line="64" column="39" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/7377099D-91F7-42A7-BB89-6982E405EFBF/2/LoggerConfiguration.cs" />
      <jump line="157" column="12" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Mvc/Assets/BundleHelper.cs" />
      <jump line="105" column="20" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/DomainName/DomainNameService.cs" />
      <jump line="313" column="0" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/Apps/AppService.cs" />
      <jump line="612" column="25" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/659CD5F0-C4CE-410C-B23A-6CADD71BB76F/69/2ec1f80f/ClaimsIdentity.cs" />
      <jump line="19" column="22" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/B2737DDC-5DB9-4606-9CC2-6986D52AF562/ce/48fb5cf0/SemVersion.cs" />
      <jump line="171" column="30" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Services/DomainName/DomainNameService.cs" />
      <jump line="42" column="29" filename="C:/dev/git/selz/drachma/src/Drachma.Core/Settings/ISiteSettings.cs" />
      <jump line="326" column="70" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="801" column="65" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="933" column="51" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="969" column="32" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="1000" column="76" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="1132" column="23" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="196" column="57" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="201" column="73" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="206" column="74" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Core/Services/Theming/ThemeRenderer.cs" />
      <jump line="9" column="0" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Models/Tax/TaxSettingsViewModel.cs" />
      <jump line="81" column="17" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Models/Product/ProductDetailViewModel.cs" />
      <jump line="34" column="15" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Models/Product/ProductOrderItemViewModel.cs" />
      <jump line="59" column="49" filename="C:/dev/git/selz/drachma/src/Drachma.Web/Areas/Builder/Models/PageContentViewModel.cs" />
      <jump line="69" column="0" filename="/CartController.cs" />
      <jump line="54" column="38" filename="C:/dev/git/selz/drachma_backup/drachma/src/Drachma.Web/Areas/Shop/Controllers/HomeController.cs" />
      <jump line="84" column="12" filename="C:/dev/git/selz/drachma_backup/drachma/src/Drachma.Web/Areas/Shop/Controllers/HomeController.cs" />
      <jump line="172" column="0" filename="C:/dev/git/selz/drachma_backup/drachma/src/Drachma.Core/Services/Blog/BlogService.cs" />
      <jump line="227" column="57" filename="C:/dev/git/selz/drachma_backup/drachma/src/Drachma.Web/Areas/Admin/Models/ShopViewModel.cs" />
      <jump line="69" column="33" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/1547FDDF-0496-45DA-A20D-69E87FC26265/af/279d58ef/MongoRepository`2.cs" />
      <jump line="153" column="34" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/96EE8D1B-889D-4F26-B7BD-4CC3F07CA395/b8/c8a61f7e/WebHost.cs" />
      <jump line="34" column="25" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/appsettings.Local.json" />
      <jump line="86" column="33" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/77140DBE-5F59-4AA6-9031-AFE37EAE5D08/7e/b809b336/RegionEndpoint.cs" />
      <jump line="18" column="30" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/appsettings.Local.json" />
      <jump line="24" column="27" filename="C:/dev/git/selz/Services.Search/Service/src/Api/Selz.Search.Api/appsettings.Local.json" />
      <jump line="40" column="24" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/7377099D-91F7-42A7-BB89-6982E405EFBF/1/Log.cs" />
      <jump line="945" column="27" filename="$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/7377099D-91F7-42A7-BB89-6982E405EFBF/1/Log.cs" />
      <jump line="80" column="37" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/B4EF600F-4A59-4FE2-865A-8F97F915FB9D/b5/6a5c291a/ObjectResultExecutor.cs" />
      <jump line="79" column="18" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/1542A513-5D72-47A0-92E8-7662B3BBDFD4/6f/382d9531/MvcServiceCollectionExtensions.cs" />
      <jump line="10" column="22" filename="$APPLICATION_CONFIG_DIR$/resharper-host/DecompilerCache/decompiler/0629A952-D07C-4608-B75F-6E6CCECBF430/4a/a6eebd94/ValidationContext.cs" />
      <jump line="165" column="23" filename="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Helpers/EnvironmentHelper.cs" />
      <jump line="25" column="20" filename="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Helpers/EnvironmentHelper.cs" />
      <jump line="61" column="72" filename="C:/dev/git/selz/Services.Contact/Service/src/Api/Selz.Contacts.Api/Controllers/ContactController.cs" />
      <jump line="208" column="25" filename="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Services/Blog/BlogService.cs" />
      <jump line="0" column="0" filename="C:/dev/git/selz/Services.Shop/Service/src/Shared/Selz.Shops.Core/Services/Blog/BlogService.cs" />
    </jumps>
    <registers>
      <register name="a" type="4">
        <text>TradePackageTradeCategories</text>
      </register>
      <register name="&quot;" type="4">
        <text>1</text>
      </register>
      <register name="b" type="4">
        <text>GroupBy</text>
      </register>
      <register name="f" type="4">
        <text />
      </register>
      <register name="i" type="4">
        <text>tradePackageItem</text>
      </register>
      <register name="l" type="4">
        <text>quoteLifecycleId</text>
      </register>
      <register name="-" type="4">
        <text>ObjectId</text>
      </register>
      <register name="/" type="4">
        <text>class</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICBwdWJsaWMgYXN5bmMgVGFzazxCbG9nUG9zdD4gR2V0QnlTbHVnKHN0cmluZyBzbHVnLCBpbnQgc2hvcElkLCBib29sIHB1Ymxpc2hlZE9ubHksIElMaXN0PHN0cmluZz4gZmllbGRzID0gbnVsbCkK</text>
      </register>
      <register name="p" type="4">
        <text>public</text>
      </register>
      <register name="1" type="4">
        <text encoding="base64">CiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIENvdW50PFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgRmlsdGVyRGVmaW5pdGlvbjxUPiBmaWx0ZXIsIENvdW50T3B0aW9ucyBvcHRpb25zID0gbnVsbCkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5LkNvbGxlY3Rpb24uQ291bnQoZmlsdGVyLCBvcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZW1vdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUIGVudGl0eSkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJlcG9zaXRvcnkuUmVtb3ZlKGVudGl0eSwgbnVsbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgUmVtb3ZlPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgVCBlbnRpdHksIGludCB1c2VySWQpIHdoZXJlIFQgOiBJRW50aXR5PFRLZXk+CiAgICAgICAgewogICAgICAgICAgICByZXBvc2l0b3J5LlJlbW92ZShlbnRpdHksIG5ldyBBY3Rvcih1c2VySWQpKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZW1vdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUIGVudGl0eSwgQWN0b3IgYWN0b3IpIHdoZXJlIFQgOiBJRW50aXR5PFRLZXk+CiAgICAgICAgewogICAgICAgICAgICBpZiAoZW50aXR5IGlzIFNob3ApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBpZCA9IChpbnQpKG9iamVjdCllbnRpdHkuSWQ7CiAgICAgICAgICAgICAgICBpZiAoaWQgPT0gMCkgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpZiB0aGUgSUQgaXMgc2V0LCB0cnkgYW5kIHJldHJpZXZlIHRoZSBvcmlnaW5hbCBvYmplY3QKICAgICAgICAgICAgdmFyIG9yaWdpbmFsT2JqZWN0ID0gcmVwb3NpdG9yeS5GaW5kT25lQnlJZChlbnRpdHkuSWQpOwogICAgICAgICAgICBpZiAob3JpZ2luYWxPYmplY3QgPT0gbnVsbCkgcmV0dXJuOwoKICAgICAgICAgICAgLy8gZGVsZXRlCiAgICAgICAgICAgIHZhciBkZWxldGFibGUgPSBlbnRpdHkgYXMgSURlbGV0YWJsZTsKICAgICAgICAgICAgaWYgKGRlbGV0YWJsZSAhPSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoYWN0b3I/LlNob3BJZCA9PSBudWxsKSB0aHJvdyBuZXcgRXhjZXB0aW9uKCJEZWxldGVkQnkgY2Fubm90IGJlIGVtcHR5Iik7CiAgICAgICAgICAgICAgICBkZWxldGFibGUuRGVsZXRlZEJ5ID0gYWN0b3IuU2hvcElkOyAgLy8gVG8ga2VlcCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBkdXJpbmcgbWlncmF0aW9uCiAgICAgICAgICAgICAgICBkZWxldGFibGUuRGVsZXRlZFRpbWUgPSByZXBvc2l0b3J5LlNjb3BlLlJlc29sdmU8SUNsb2NrPigpLlV0Y05vdzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gIyNTVEFGRiMjIENvbW1lbnRlZCBvdXQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IChjb21tZW50IHRvIGJlIHJlbW92ZWQgYWZ0ZXIgdGhlIG1pZ3JhdGlvbikKICAgICAgICAgICAgLy8gICAgICAgICAgICAvLyBpZiBvYmplY3QgYmVsb25ncyB0byBhIHNob3AgKGlzIElUZW5hbnQpLCB2ZXJpZnkgb3duZXJzaGlwIChJRE9SIGF0dGFjayBwcmV2ZW50aW9uKQogICAgICAgICAgICAvLyAgICAgICAgICAgIHZhciB0ZW5hbnQgPSBlbnRpdHkgYXMgSVRlbmFudDsKICAgICAgICAgICAgLy8gICAgICAgICAgICBpZiAodGVuYW50ICE9IG51bGwpCiAgICAgICAgICAgIC8vICAgICAgICAgICAgewogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBpZiAoYWN0b3I/LlNob3BJZCA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKG5hbWVvZihhY3RvciksICJTaG9wSWQgY2Fubm90IGJlIGVtcHR5Iik7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGlmICh0ZW5hbnQuU2hvcElkICE9IGFjdG9yLlNob3BJZCkgdGhyb3cgbmV3IFNlY3VyaXR5RXhjZXB0aW9uKCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIHJlbW92ZSBvYmplY3QiKTsKICAgICAgICAgICAgLy8gICAgICAgICAgICB9CgogICAgICAgICAgICAvLyByZW1vdmUgKGhhcmQgZGVsZXRlKSBmcm9tIG9yaWdpbmFsIGNvbGxlY3Rpb24KICAgICAgICAgICAgcmVwb3NpdG9yeS5SZW1vdmUoZW50aXR5LklkKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZW1vdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUS2V5IGlkKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgdmFyIGZpbHRlciA9IEJ1aWxkZXJzPFQ+LkZpbHRlci5FcSh4ID0+IHguSWQsIGlkKTsKICAgICAgICAgICAgcmVwb3NpdG9yeS5Db2xsZWN0aW9uLkRlbGV0ZU9uZShmaWx0ZXIpOwoKICAgICAgICAgICAgLy8gZmluZCBzaG9wIGlkCiAgICAgICAgICAgIHZhciBzaG9wSWQgPSAwOwogICAgICAgICAgICBpZiAodHlwZW9mKFQpLklzQXNzaWduYWJsZUZyb20odHlwZW9mKFNob3ApKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc2hvcElkID0gKGludCkgKG9iamVjdCkgaWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mKFQpLklzQXNzaWduYWJsZUZyb20odHlwZW9mKElUZW5hbnQpKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc2hvcElkID0gKChJVGVuYW50KSByZXBvc2l0b3J5LkZpbmRPbmVCeUlkKGlkKSkuU2hvcElkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZihUKS5Jc0Fzc2lnbmFibGVGcm9tKHR5cGVvZihPcmRlcikpIHx8IHR5cGVvZihUKS5Jc0Fzc2lnbmFibGVGcm9tKHR5cGVvZihPcmRlckZyZWUpKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG9yZGVyID0gcmVwb3NpdG9yeS5TY29wZS5SZXNvbHZlPElSZXBvc2l0b3J5PE9yZGVyPj4oKS5GaW5kT25lQnlJZCgoT2JqZWN0SWQpIChvYmplY3QpIGlkKSA/PwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeS5TY29wZS5SZXNvbHZlPElSZXBvc2l0b3J5PE9yZGVyRnJlZT4+KCkuRmluZE9uZUJ5SWQoKE9iamVjdElkKSAob2JqZWN0KSBpZCk7CiAgICAgICAgICAgICAgICBpZiAob3JkZXIgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzaG9wSWQgPSBvcmRlci5TaG9wSWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHNxcwogICAgICAgICAgICB2YXIgc3FzTWVzc2FnZURpc3BhdGNoZXIgPSByZXBvc2l0b3J5LlNjb3BlLlJlc29sdmU8SVNxc01lc3NhZ2VEaXNwYXRjaGVyPigpOwogICAgICAgICAgICBUYXNrLlJ1bigoKSA9PiBzcXNNZXNzYWdlRGlzcGF0Y2hlci5TZW5kRGVsZXRlTWVzc2FnZTxUPihpZC5Ub1N0cmluZygpLCBzaG9wSWQpKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZW1vdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBGaWx0ZXJEZWZpbml0aW9uPFQ+IGZpbHRlcikgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5EZWxldGVNYW55KGZpbHRlcik7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgUmVtb3ZlQWxsPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5EZWxldGVNYW55KEJ1aWxkZXJzPFQ+LkZpbHRlci5FbXB0eSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2F2ZTxULCBUS2V5Pih0aGlzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHJlcG9zaXRvcnksIFQgZW50aXR5KSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgcmVwb3NpdG9yeS5TYXZlSW50ZXJuYWwoZW50aXR5LCBuZXcgQWN0b3IoMCkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNhdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUIGVudGl0eSwgaW50IHNob3BJZCkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJlcG9zaXRvcnkuU2F2ZUludGVybmFsKGVudGl0eSwgbmV3IEFjdG9yKHNob3BJZCkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNhdmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUIGVudGl0eSwgQWN0b3IgYWN0b3IpIHdoZXJlIFQgOiBJRW50aXR5PFRLZXk+CiAgICAgICAgewogICAgICAgICAgICByZXBvc2l0b3J5LlNhdmVJbnRlcm5hbChlbnRpdHksIGFjdG9yKTsKICAgICAgICB9CgogICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgU2F2ZUludGVybmFsPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgVCBlbnRpdHksIEFjdG9yIGFjdG9yKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgaWYgKGVudGl0eSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKG5hbWVvZihlbnRpdHkpLCAiY2Fubm90IGJlIG51bGwiKTsKCiAgICAgICAgICAgIHZhciBvcmlnaW5hbE9iamVjdCA9IHJlcG9zaXRvcnkuQ2hlY2tFeGlzdChlbnRpdHkpOwoKICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBubyBvYmplY3QgaW4gdGhlIGRhdGFiYXNlLCBpdCdzIGEgbmV3IG9uZQogICAgICAgICAgICBpZiAob3JpZ2luYWxPYmplY3QgPT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZihUS2V5KSA9PSB0eXBlb2YoT2JqZWN0SWQpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IChPYmplY3RJZCkgKG9iamVjdCkgZW50aXR5LklkOwogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PSBPYmplY3RJZC5FbXB0eSkgZW50aXR5LklkID0gKFRLZXkpIChvYmplY3QpIE9iamVjdElkLkdlbmVyYXRlTmV3SWQoKTsgLy8gYXNzaWduIG5ldyBpZAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZQogICAgICAgICAgICAgICAgdmFyIGNyZWF0YWJsZUVudGl0eSA9IGVudGl0eSBhcyBJQ3JlYXRhYmxlOwogICAgICAgICAgICAgICAgaWYgKGNyZWF0YWJsZUVudGl0eSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmIChhY3Rvcj8uVXNlcklkID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24obmFtZW9mKGFjdG9yKSwgIkNyZWF0ZWRCeSBjYW5ub3QgYmUgZW1wdHkiKTsKICAgICAgICAgICAgICAgICAgICBjcmVhdGFibGVFbnRpdHkuQ3JlYXRlZEJ5ID0gYWN0b3IuVXNlcklkOwogICAgICAgICAgICAgICAgICAgIGNyZWF0YWJsZUVudGl0eS5DcmVhdGVkVGltZSA9IERhdGVUaW1lLlV0Y05vdzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyB0ZW5hbnQgKG93bmVyKQogICAgICAgICAgICAgICAgdmFyIHRlbmFudEVudGl0eSA9IGVudGl0eSBhcyBJVGVuYW50OwogICAgICAgICAgICAgICAgaWYgKHRlbmFudEVudGl0eSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8vIElmIFNob3BJZCBpcyBub3Qgc2V0IHlldCwgc2V0IGZyb20gYWN0b3IKICAgICAgICAgICAgICAgICAgICBpZiAodGVuYW50RW50aXR5LlNob3BJZCA8PSAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdG9yID09IG51bGwgfHwgYWN0b3IuU2hvcElkIDw9IDApIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24obmFtZW9mKGFjdG9yKSwgIlNob3BJZCBjYW5ub3QgYmUgZW1wdHkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50RW50aXR5LlNob3BJZCA9IGFjdG9yLlNob3BJZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyB1cGRhdGUKICAgICAgICAgICAgICAgIHZhciB1cGRhdGFibGVFbnRpdHkgPSBlbnRpdHkgYXMgSVVwZGF0YWJsZTsKICAgICAgICAgICAgICAgIGlmICh1cGRhdGFibGVFbnRpdHkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYWN0b3I/LlVzZXJJZCA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKG5hbWVvZihhY3RvciksICJVcGRhdGVkQnkgY2Fubm90IGJlIGVtcHR5Iik7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRhYmxlRW50aXR5LlVwZGF0ZWRCeSA9IGFjdG9yLlVzZXJJZDsKICAgICAgICAgICAgICAgICAgICB1cGRhdGFibGVFbnRpdHkuVXBkYXRlZFRpbWUgPSBEYXRlVGltZS5VdGNOb3c7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gIyNTVEFGRiMjIENvbW1lbnRlZCBvdXQgdW50aWwgd2UgZGVjaWRlIGlmIHdlIGFyZSBnb2luZyB0byBiZSBjaGVja2luZyBvd25lcnNoaXAgYXQgdGhlIHJlcG9zaXRvcnkgbGV2ZWwgKGF2b2lkIElET1IgYXR0YWNrKQovLyAgICAgICAgICAgICAgICAvLyBpZiBvYmplY3QgYmVsb25ncyB0byBhIHNob3AgKGlzIElUZW5hbnQpLCB2ZXJpZnkgb3duZXJzaGlwCi8vICAgICAgICAgICAgICAgIHZhciB0ZW5hbnRFbnRpdHkgPSBlbnRpdHkgYXMgSVRlbmFudDsKLy8gICAgICAgICAgICAgICAgaWYgKHRlbmFudEVudGl0eSAhPSBudWxsKQovLyAgICAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICAgICBpZiAoYWN0b3IgPT0gbnVsbCB8fCBhY3Rvci5TaG9wSWQgPD0gMCkgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihuYW1lb2YoYWN0b3IpLCAiU2hvcElkIGNhbm5vdCBiZSBlbXB0eSIpOwovLyAgICAgICAgICAgICAgICAgICAgaWYgKHRlbmFudEVudGl0eS5TaG9wSWQgIT0gYWN0b3IuU2hvcElkKSB0aHJvdyBuZXcgU2VjdXJpdHlFeGNlcHRpb24oIlVuYXV0aG9yaXplZCBhY2Nlc3MgdG8gdXBkYXRlIG9iamVjdCIpOwovLyAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICMjU1RBRkYjIyBTZXQgZmxhZyBpbmRpY2F0ZWQgcmVjb3JkIGhhcyBiZWVuIG1pZ3JhdGVkCiAgICAgICAgICAgIHZhciBtaWdyYXRlZCA9IGVudGl0eSBhcyBJTWlncmF0ZWQ7CiAgICAgICAgICAgIGlmIChtaWdyYXRlZCAhPSBudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtaWdyYXRlZC5NaWdyYXRlZCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlbnRpdHkgaXMgSVNjaGVtYVZlcnNpb24pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIFVzaW5nIHJlZmxlY3Rpb24uCiAgICAgICAgICAgICAgICB2YXIgYXR0cnMgPSBBdHRyaWJ1dGUuR2V0Q3VzdG9tQXR0cmlidXRlcyhlbnRpdHkuR2V0VHlwZSgpKTsgLy8gUmVmbGVjdGlvbi4KCiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYXR0ciBpbiBhdHRycykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlID0gYXR0ciBhcyBTY2hlbWFWZXJzaW9uQXR0cmlidXRlOwogICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT0gbnVsbCkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbkF0dHJpYnV0ZSB2ZXJzaW9uQXR0cmlidXRlID0gYXR0cmlidXRlOwogICAgICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uYWJsZSA9IGVudGl0eSBhcyBJU2NoZW1hVmVyc2lvbjsKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uYWJsZS5TY2hlbWFWZXJzaW9uID0gdmVyc2lvbkF0dHJpYnV0ZS5WZXJzaW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBzYXZlCiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBCdWlsZGVyczxUPi5GaWx0ZXIuRXEoeCA9PiB4LklkLCBlbnRpdHkuSWQpOwogICAgICAgICAgICByZXBvc2l0b3J5LkNvbGxlY3Rpb24uUmVwbGFjZU9uZShmaWx0ZXIsIGVudGl0eSwgbmV3IFVwZGF0ZU9wdGlvbnMge0lzVXBzZXJ0ID0gdHJ1ZX0pOwoKICAgICAgICAgICAgLy8gc3FzCiAgICAgICAgICAgIHZhciBzcXNNZXNzYWdlRGlzcGF0Y2hlciA9IHJlcG9zaXRvcnkuU2NvcGUuUmVzb2x2ZTxJU3FzTWVzc2FnZURpc3BhdGNoZXI+KCk7CiAgICAgICAgICAgIFRhc2suUnVuKCgpID0+IHNxc01lc3NhZ2VEaXNwYXRjaGVyLlNlbmRVcGRhdGVNZXNzYWdlKGVudGl0eSwgYWN0b3IuU2hvcElkKSk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHN0YXRpYyBUIENoZWNrRXhpc3Q8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUIGVudGl0eSkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIGlmIChlbnRpdHkgaXMgU2hvcCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHVzZXIgPSAoU2hvcCkgKG9iamVjdCkgZW50aXR5OwogICAgICAgICAgICAgICAgaWYgKHVzZXIuSWQgPiAwICYmIHVzZXIuQ3JlYXRlZFRpbWUgIT0gRGF0ZVRpbWUuTWluVmFsdWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnkuRmluZE9uZUJ5SWQoZW50aXR5LklkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbnRpdHkgaXMgSUVudGl0eSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCgoSUVudGl0eSkgZW50aXR5KS5JZCAhPSBPYmplY3RJZC5FbXB0eSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5IGlzIElBdWRpdGFibGUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5GaW5kT25lQnlJZChlbnRpdHkuSWQpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IEJ1aWxkZXJzPFQ+LkZpbHRlci5FcSh4ID0+IHguSWQsIGVudGl0eS5JZCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJldFZhbCA9IHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5GaW5kKGZpbHRlcikKICAgICAgICAgICAgICAgICAgICAgICAgLkxpbWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgIC5Qcm9qZWN0PFQ+KEJ1aWxkZXJzPFQ+LlByb2plY3Rpb24uSW5jbHVkZSgiVXBkYXRlZFRpbWUiKS5JbmNsdWRlKCJDcmVhdGVkVGltZSIpLkluY2x1ZGUoIlVwZGF0ZWRCeSIpLkluY2x1ZGUoIkNyZWF0ZWRCeSIpKQogICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RPckRlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0VmFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdChUKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBVcGRhdGVPbmU8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBGaWx0ZXJEZWZpbml0aW9uPFQ+IGZpbHRlciwgVXBkYXRlRGVmaW5pdGlvbjxUPiB1cGRhdGUsIFVwZGF0ZU9wdGlvbnMgb3B0aW9ucyA9IG51bGwsIGludD8gdXNlcklkID0gMCkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHJlcG9zaXRvcnkuVXBkYXRlSW50ZXJuYWwoZmlsdGVyLCB1cGRhdGUsIG9wdGlvbnMsIHVzZXJJZCwgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgVXBkYXRlTWFueTxULCBUS2V5Pih0aGlzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHJlcG9zaXRvcnksIEZpbHRlckRlZmluaXRpb248VD4gZmlsdGVyLCBVcGRhdGVEZWZpbml0aW9uPFQ+IHVwZGF0ZSwgVXBkYXRlT3B0aW9ucyBvcHRpb25zID0gbnVsbCwgaW50PyB1c2VySWQgPSAwKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgcmVwb3NpdG9yeS5VcGRhdGVJbnRlcm5hbChmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucywgdXNlcklkLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIFVwZGF0ZUludGVybmFsPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgRmlsdGVyRGVmaW5pdGlvbjxUPiBmaWx0ZXIsIFVwZGF0ZURlZmluaXRpb248VD4gdXBkYXRlLCBVcGRhdGVPcHRpb25zIG9wdGlvbnMsIGludD8gdXNlcklkLCBib29sIHVwZGF0ZU9uZSkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHVwZGF0ZSA9IFNldFVwZGF0YWJsZShyZXBvc2l0b3J5LCB1cGRhdGUsIHVzZXJJZCk7CgogICAgICAgICAgICBpZiAodXBkYXRlT25lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXBvc2l0b3J5LkNvbGxlY3Rpb24uVXBkYXRlT25lKGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5VcGRhdGVNYW55KGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShlKTsKICAgICAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVXBkYXRlRGVmaW5pdGlvbjxUPiBTZXRVcGRhdGFibGU8VCwgVEtleT4oSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgVXBkYXRlRGVmaW5pdGlvbjxUPiB1cGRhdGUsIGludD8gdXNlcklkKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgaWYgKHR5cGVvZihJVXBkYXRhYmxlKS5Jc0Fzc2lnbmFibGVGcm9tKHR5cGVvZihUKSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIGNhbGxpbmcgU2V0VXBkYXRhYmxlSW50ZXJuYWwKICAgICAgICAgICAgICAgIHZhciBwMCA9IEV4cHJlc3Npb24uUGFyYW1ldGVyKHR5cGVvZihJUmVwb3NpdG9yeTxULCBUS2V5PikpOwogICAgICAgICAgICAgICAgdmFyIHAxID0gRXhwcmVzc2lvbi5QYXJhbWV0ZXIodHlwZW9mKFVwZGF0ZURlZmluaXRpb248VD4pKTsKICAgICAgICAgICAgICAgIHZhciBwMiA9IEV4cHJlc3Npb24uUGFyYW1ldGVyKHR5cGVvZihzdHJpbmcpKTsKICAgICAgICAgICAgICAgIHZhciBjYWxsID0gRXhwcmVzc2lvbi5DYWxsKHR5cGVvZihSZXBvc2l0b3J5RXh0ZW5zaW9ucyksIG5hbWVvZihTZXRVcGRhdGFibGVJbnRlcm5hbCksIG5ld1tdIHsgdHlwZW9mKFQpLCB0eXBlb2YoVEtleSkgfSwgcDAsIHAxLCBwMik7CiAgICAgICAgICAgICAgICB2YXIgbGFtYmRhID0gRXhwcmVzc2lvbi5MYW1iZGE8RnVuYzxJUmVwb3NpdG9yeTxULCBUS2V5PiwgVXBkYXRlRGVmaW5pdGlvbjxUPiwgc3RyaW5nLCBVcGRhdGVEZWZpbml0aW9uPFQ+Pj4oY2FsbCwgcDAsIHAxLCBwMik7CgogICAgICAgICAgICAgICAgLy8gIyNTVEFGRiMjIFRlbXBvcmFyaWx5IGNvbW1lbnRlZCBvdXQgYW5kIHBhc3NpbmcgdXNlcklkIGFzIG51bGwsIHNob3VsZCBpbmNsdWRlIHVzZXJJZCBvbmNlIGl0J3MgYWxsIGNoYW5nZWQgdG8gc3RyaW5nCiAgICAgICAgICAgICAgICAvL3VwZGF0ZSA9IGxhbWJkYS5Db21waWxlKCkocmVwb3NpdG9yeSwgdXBkYXRlLCB1c2VySWQpOwogICAgICAgICAgICAgICAgdXBkYXRlID0gbGFtYmRhLkNvbXBpbGUoKShyZXBvc2l0b3J5LCB1cGRhdGUsIG51bGwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdXBkYXRlOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVXBkYXRlRGVmaW5pdGlvbjxUPiBTZXRVcGRhdGFibGVJbnRlcm5hbDxULCBUS2V5Pih0aGlzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHJlcG9zaXRvcnksIFVwZGF0ZURlZmluaXRpb248VD4gdXBkYXRlLCBzdHJpbmcgdXNlcklkKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PiwgSVVwZGF0YWJsZQogICAgICAgIHsKICAgICAgICAgICAgdmFyIGNsb2NrID0gcmVwb3NpdG9yeS5TY29wZS5SZXNvbHZlPElDbG9jaz4oKTsKCiAgICAgICAgICAgIHVwZGF0ZSA9IHVwZGF0ZS5TZXQoeCA9PiB4LlVwZGF0ZWRUaW1lLCBjbG9jay5VdGNOb3cpOwoKICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eSh1c2VySWQpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1cGRhdGUgPSB1cGRhdGUuU2V0KHggPT4geC5VcGRhdGVkQnksIHVzZXJJZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB1cGRhdGU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgc3RhdGljIFQgRmluZEFuZE1vZGlmeTxULCBUS2V5Pih0aGlzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHJlcG9zaXRvcnksIEZpbHRlckRlZmluaXRpb248VD4gZmlsdGVyLCBVcGRhdGVEZWZpbml0aW9uPFQ+IHVwZGF0ZSwgRmluZE9uZUFuZFVwZGF0ZU9wdGlvbnM8VCwgVD4gb3B0aW9ucyA9IG51bGwsIGludD8gc2hvcElkID0gbnVsbCkgd2hlcmUgVCA6IElFbnRpdHk8VEtleT4KICAgICAgICB7CiAgICAgICAgICAgIHVwZGF0ZSA9IFNldFVwZGF0YWJsZShyZXBvc2l0b3J5LCB1cGRhdGUsIHNob3BJZCk7CiAgICAgICAgICAgIHZhciBlbnRpdHkgPSByZXBvc2l0b3J5LkNvbGxlY3Rpb24uRmluZE9uZUFuZFVwZGF0ZShmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucyA/PyBuZXcgRmluZE9uZUFuZFVwZGF0ZU9wdGlvbnM8VD4ge1JldHVybkRvY3VtZW50ID0gUmV0dXJuRG9jdW1lbnQuQWZ0ZXJ9KTsKCiAgICAgICAgICAgIGlmIChlbnRpdHkgIT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gc3FzCiAgICAgICAgICAgICAgICB2YXIgc3FzTWVzc2FnZURpc3BhdGNoZXIgPSByZXBvc2l0b3J5LlNjb3BlLlJlc29sdmU8SVNxc01lc3NhZ2VEaXNwYXRjaGVyPigpOwogICAgICAgICAgICAgICAgVGFzay5SdW4oKCkgPT4gc3FzTWVzc2FnZURpc3BhdGNoZXIuU2VuZFVwZGF0ZU1lc3NhZ2UoZW50aXR5LCBzaG9wSWQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGVudGl0eTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbnNlcnRCYXRjaDxULCBUS2V5Pih0aGlzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHJlcG9zaXRvcnksIElFbnVtZXJhYmxlPFQ+IGRvY3VtZW50cywgSW5zZXJ0TWFueU9wdGlvbnMgb3B0aW9ucyA9IG51bGwpIHdoZXJlIFQgOiBJRW50aXR5PFRLZXk+CiAgICAgICAgewogICAgICAgICAgICByZXBvc2l0b3J5LkNvbGxlY3Rpb24uSW5zZXJ0TWFueShkb2N1bWVudHMsIG9wdGlvbnMpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN0YXRpYyBJU2xpY2VkTGlzdDxUPiBGaW5kQXNTbGljZWRMaXN0PFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgRmlsdGVyRGVmaW5pdGlvbjxUPiBmaWx0ZXIsIFNsaWNlT3B0aW9ucyBzbGljZU9wdGlvbnMgPSBudWxsKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgdmFyIGZpbHRlckJ1aWxkZXIgPSBCdWlsZGVyczxUPi5GaWx0ZXI7CgogICAgICAgICAgICBzbGljZU9wdGlvbnMgPSBzbGljZU9wdGlvbnMgPz8gU2xpY2VPcHRpb25zLkNyZWF0ZShudWxsLCAyMCk7CgogICAgICAgICAgICAvLyBpbml0aWFsaXplIGxpbWl0IGFuZCBzb3J0CiAgICAgICAgICAgIHZhciBsaW1pdCA9IHNsaWNlT3B0aW9ucy5TaXplICsgMjsKICAgICAgICAgICAgdmFyIHNvcnQgPSBzbGljZU9wdGlvbnMuU29ydDsKICAgICAgICAgICAgdmFyIHNsaWNlZEZpbHRlciA9IGZpbHRlcjsKCiAgICAgICAgICAgIC8vIElmIHNsaWNlIHZhbHVlIGlzIGRlZmluZWQsIHNldCBtaW4gb3IgbWF4IHZhbHVlIGZvciB0aGUgZmlsdGVyCiAgICAgICAgICAgIGlmIChzbGljZU9wdGlvbnMuVmFsdWUgIT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKHNsaWNlT3B0aW9ucy5EaXJlY3Rpb24gPT0gU2xpY2VEaXJlY3Rpb24uTmV4dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzbGljZWRGaWx0ZXIgPSBmaWx0ZXIgIT0gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICA/IGZpbHRlciAmIGZpbHRlckJ1aWxkZXIuTHRlKHNsaWNlT3B0aW9ucy5GaWVsZCwgQnNvblZhbHVlLkNyZWF0ZShzbGljZU9wdGlvbnMuVmFsdWUpKQogICAgICAgICAgICAgICAgICAgICAgICA6IGZpbHRlckJ1aWxkZXIuTHRlKHNsaWNlT3B0aW9ucy5GaWVsZCwgQnNvblZhbHVlLkNyZWF0ZShzbGljZU9wdGlvbnMuVmFsdWUpKTsKCiAgICAgICAgICAgICAgICAgICAgc29ydCA9IHNsaWNlT3B0aW9ucy5Tb3J0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoc2xpY2VPcHRpb25zLkRpcmVjdGlvbiA9PSBTbGljZURpcmVjdGlvbi5QcmV2aW91cykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzbGljZWRGaWx0ZXIgPSBmaWx0ZXIgIT0gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICA/IGZpbHRlciAmIGZpbHRlckJ1aWxkZXIuR3RlKHNsaWNlT3B0aW9ucy5GaWVsZCwgQnNvblZhbHVlLkNyZWF0ZShzbGljZU9wdGlvbnMuVmFsdWUpKQogICAgICAgICAgICAgICAgICAgICAgICA6IGZpbHRlckJ1aWxkZXIuR3RlKHNsaWNlT3B0aW9ucy5GaWVsZCwgQnNvblZhbHVlLkNyZWF0ZShzbGljZU9wdGlvbnMuVmFsdWUpKTsKCiAgICAgICAgICAgICAgICAgICAgc29ydCA9IHNsaWNlT3B0aW9ucy5Tb3J0SW52ZXJ0ZWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBmaW5kRmx1ZW50ID0gcmVwb3NpdG9yeS5GaW5kKHNsaWNlZEZpbHRlcikuTGltaXQobGltaXQpLlNldFNvcnQoU29ydE9wdGlvbnMuQ3JlYXRlKHNsaWNlT3B0aW9ucy5GaWVsZCwgc29ydCkpOwoKICAgICAgICAgICAgdmFyIGxpc3QgPSBzbGljZU9wdGlvbnMuRGlyZWN0aW9uID09IFNsaWNlRGlyZWN0aW9uLk5leHQgPyBmaW5kRmx1ZW50LlRvTGlzdCgpIDogZmluZEZsdWVudC5Tb3J0KEJ1aWxkZXJzPFQ+LlNvcnQuRGVzY2VuZGluZyhzbGljZU9wdGlvbnMuRmllbGQpKS5Ub0xpc3QoKTsKCiAgICAgICAgICAgIC8vIGlmIHByZXZpb3VzIGJ1dHRvbiB3YXMgY2xpY2tlZCBhbmQgcmV0dXJuZWQgcmVjb3JkcyBhcmUgbGVzcyB0aGFuIHBhZ2Ugc2l6ZSwgaXQgbWVhbnMgaXQgZ290IHRvIHRoZSBmaXJzdCBwYWdlLAogICAgICAgICAgICAvLyBzbyBpbiB0aGF0IGNhc2UsIGZpbHRlciBhZ2FpbiB3aXRob3V0IHJhbmdlIChhcyBpZiBpdCB3YXMgbm9ybWFsIGZpcnN0IHBhZ2UpIC0gdGhpcyB3aWxsIGFsbG93IGEgcmVmcmVzaCBmb3IgbmV3IHJlY29yZHMKICAgICAgICAgICAgaWYgKHNsaWNlT3B0aW9ucy5EaXJlY3Rpb24gPT0gU2xpY2VEaXJlY3Rpb24uUHJldmlvdXMgJiYgbGlzdC5Db3VudCA8IHNsaWNlT3B0aW9ucy5TaXplKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzbGljZU9wdGlvbnMuRGlyZWN0aW9uID0gU2xpY2VEaXJlY3Rpb24uTmV4dDsKICAgICAgICAgICAgICAgIHNsaWNlT3B0aW9ucy5WYWx1ZSA9IG51bGw7CiAgICAgICAgICAgICAgICBsaXN0ID0gcmVwb3NpdG9yeS5GaW5kKGZpbHRlcikuTGltaXQobGltaXQpLlNldFNvcnQoU29ydE9wdGlvbnMuQ3JlYXRlKHNsaWNlT3B0aW9ucy5GaWVsZCwgc2xpY2VPcHRpb25zLlNvcnQpKS5Ub0xpc3QoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYm9vbCBoYXNQcmV2aW91c1ZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIGJvb2wgaGFzTmV4dFZhbHVlID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoc2xpY2VPcHRpb25zLkRpcmVjdGlvbiA9PSBTbGljZURpcmVjdGlvbi5OZXh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoYXNQcmV2aW91c1ZhbHVlID0gc2xpY2VPcHRpb25zLlZhbHVlICE9IG51bGw7CiAgICAgICAgICAgICAgICBoYXNOZXh0VmFsdWUgPSBsaXN0LkNvdW50ID09IGxpbWl0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHNsaWNlT3B0aW9ucy5EaXJlY3Rpb24gPT0gU2xpY2VEaXJlY3Rpb24uUHJldmlvdXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhhc1ByZXZpb3VzVmFsdWUgPSBsaXN0LkNvdW50ID09IGxpbWl0OwogICAgICAgICAgICAgICAgaGFzTmV4dFZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgSUxpc3Q8VD4gY3VycmVudFBhZ2UgPSBsaXN0LlNraXAoaGFzUHJldmlvdXNWYWx1ZSA/IDEgOiAwKS5UYWtlKHNsaWNlT3B0aW9ucy5TaXplKS5Ub0xpc3QoKTsKCiAgICAgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gaGFzUHJldmlvdXNWYWx1ZSA/IGN1cnJlbnRQYWdlLkZpcnN0T3JEZWZhdWx0KCkuVG9Cc29uRG9jdW1lbnQoKVtzbGljZU9wdGlvbnMuRmllbGRdIDogbnVsbDsKICAgICAgICAgICAgdmFyIG5leHRWYWx1ZSA9IGhhc05leHRWYWx1ZSA/IGN1cnJlbnRQYWdlLkxhc3RPckRlZmF1bHQoKS5Ub0Jzb25Eb2N1bWVudCgpW3NsaWNlT3B0aW9ucy5GaWVsZF0gOiBudWxsOwoKICAgICAgICAgICAgcmV0dXJuIG5ldyBTbGljZWRMaXN0PFQ+KGN1cnJlbnRQYWdlLlRvTGlzdCgpLCBzbGljZU9wdGlvbnMuVmFsdWUsIHNsaWNlT3B0aW9ucy5TaXplLCBwcmV2aW91c1ZhbHVlLCBuZXh0VmFsdWUpOwogICAgICAgIH0=</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgCg==</text>
      </register>
      <register name="r" type="4">
        <text>Repository</text>
      </register>
      <register name="3" type="4">
        <text encoding="base64">ICBwdWJsaWMgc3RhdGljIFQgRmluZE9uZUJ5SWQ8VCwgVEtleT4odGhpcyBJUmVwb3NpdG9yeTxULCBUS2V5PiByZXBvc2l0b3J5LCBUS2V5IGlkKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgdmFyIGZpbHRlciA9IEJ1aWxkZXJzPFQ+LkZpbHRlci5FcSh4ID0+IHguSWQsIGlkKTsKICAgICAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5GaW5kKGZpbHRlcikuRmlyc3RPckRlZmF1bHQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzdGF0aWMgVCBGaW5kT25lPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgRmlsdGVyRGVmaW5pdGlvbjxUPiBmaWx0ZXIpIHdoZXJlIFQgOiBJRW50aXR5PFRLZXk+CiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5Db2xsZWN0aW9uLkZpbmQoZmlsdGVyKS5GaXJzdE9yRGVmYXVsdCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN0YXRpYyBJRmluZEZsdWVudDxULCBUPiBGaW5kPFQsIFRLZXk+KHRoaXMgSVJlcG9zaXRvcnk8VCwgVEtleT4gcmVwb3NpdG9yeSwgRmlsdGVyRGVmaW5pdGlvbjxUPiBmaWx0ZXIsIEZpbmRPcHRpb25zIG9wdGlvbnMgPSBudWxsKSB3aGVyZSBUIDogSUVudGl0eTxUS2V5PgogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnkuQ29sbGVjdGlvbi5GaW5kKGZpbHRlciwgb3B0aW9ucyk7CiAgICAgICAgfQo=</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgICAgICAgICAgTG9nZ2VyID0gTnVsbExvZ2dlci5JbnN0YW5jZTsK</text>
      </register>
      <register name="t" type="4">
        <text>TradePackag</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICAK</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgIAo=</text>
      </register>
      <register name="8" type="4">
        <text encoding="base64">ICAgICAgICB2YXIgZmlsdGVyQnVpbGRlciA9IEJ1aWxkZXJzPEJsb2dQb3N0Pi5GaWx0ZXI7CiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBmaWx0ZXJCdWlsZGVyLkVxKHggPT4geC5TaG9wSWQsIHNob3BJZCk7</text>
      </register>
      <register name="9" type="4">
        <text encoding="base64">dmFyIGZpbHRlckJ1aWxkZXIgPSBCdWlsZGVyczxCbG9nUG9zdD4uRmlsdGVyOwogICAgICAgICAgICB2YXIgZmlsdGVyID0gZmlsdGVyQnVpbGRlci5FcSh4ID0+IHguU2hvcElkLCBzaG9wSWQpICYgZmlsdGVyQnVpbGRlci5FcSh4ID0+IHguSWQsIGlkKTs=</text>
      </register>
      <register name=":" type="4">
        <text>set rnu</text>
      </register>
    </registers>
    <search>
      <last-search>class</last-search>
      <last-offset />
      <last-pattern>class</last-pattern>
      <last-replace>Id1</last-replace>
      <last-substitute>class</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry>mat-cell</entry>
        <entry>w</entry>
        <entry encoding="base64">XDxTaG9wUm9sZUVuZFBvaW50XD4=</entry>
        <entry encoding="base64">XDxfYW1hem9uU2V0dGluZ3NcPg==</entry>
        <entry encoding="base64">XDxzZXR0aW5nXD4=</entry>
        <entry encoding="base64">XDx0aGVtZVw+</entry>
        <entry encoding="base64">XDxSZW5kZXJQYXJ0aWFsVmlld1w+</entry>
        <entry encoding="base64">XDxfYmxvZ1NlcnZpY2VcPg==</entry>
        <entry>class'</entry>
        <entry encoding="base64">XDxTdGF0dXNDb2RlXD4=</entry>
        <entry encoding="base64">XDwpXD4=</entry>
        <entry>class</entry>
      </history-search>
      <history-cmd>
        <entry>source ~/.ideavimrc</entry>
        <entry encoding="base64">OnNldCBudW1iZXIgOnNldCBjbGlwYm9hcmQ9dW5uYW1lZHBsdXMgOm5ub3JlbWFwIFMgZGl3IjBQIDpubm9yZW1hcCB6SCAzMHpoIDpubm9yZW1hcCB6TCAzMHpsIA==</entry>
        <entry>:set number</entry>
        <entry>set number</entry>
        <entry>set rnu</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed CLOSE_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>